"use strict";angular.module("frontend2App",["ngAnimate","ngSanitize","ngTouch","ui.router","restangular","toastr","angular-loading-bar","ui.bootstrap","LocalStorageModule","file-model","thatisuday.ng-image-gallery"]).config(["$stateProvider","$urlRouterProvider",function(a,b){b.otherwise("VCWebApp"),a.state("VCWebApp",{url:"/VCWebApp",controller:"InitCtrl"}).state("login",{url:"/login",templateUrl:"views/login.html",controller:"LoginCtrl"}).state("main",{url:"/",templateUrl:"views/main.html","abstract":!0}).state("main.home",{url:"inicio",templateUrl:"views/home.html",controller:"HomeCtrl","abstract":!0}).state("main.home.requestlist",{url:"/solicitud?statusId&guaranteeLetterId&requestId&sd1&sd2",templateUrl:"views/requestlist.html",controller:"RequestlistCtrl",params:{filter:""},resolve:{response:["$rootScope","$stateParams","request",function(a,b,c){var d={guaranteeLetterId:b.guaranteeLetterId,requestId:b.requestId,statusId:b.statusId,page:1,pageSize:6,sd1:b.sd1,sd2:b.sd2};return c.getRequestQS(d).then(function(a){return a},function(a){return a})}]}}).state("main.home.userlist",{url:"/usuario",templateUrl:"views/userlist.html",controller:"UserlistCtrl"}).state("main.home.personlist",{url:"/persona?identityCard&firstName&lastName&profileId&stateId",templateUrl:"views/personlist.html",controller:"PersonlistCtrl",resolve:{response:["$stateParams","person",function(a,b){var c={identityCard:a.identityCard,firstName:a.firstName,lastName:a.lastName,profileId:a.profileId,stateId:a.stateId,page:1,pageSize:6};return b.getPersonQS(c).then(function(a){return a},function(a){return a})}]}}).state("main.home.persondetail",{url:"/persona/:id/detalles",templateUrl:"views/persondetail.html",controller:"PersondetailCtrl",resolve:{response:["$stateParams","person",function(a,b){return b.getPersonById(a.id).then(function(a){return a},function(a){return a})}]}}).state("main.home.loaddata",{url:"/solicitud/:id/cargardatos",templateUrl:"views/loaddata.html",controller:"LoaddataCtrl","abstract":!0,resolve:{response:["$rootScope","$stateParams","request",function(a,b,c){return c.getById(b.id).then(function(b){return a.statusGroups=b.data.statusGroups,b},function(a){return a})}]}}).state("main.home.loaddata.requestdetail",{url:"/detalles",templateUrl:"views/requestdetail.html",controller:"RequestdetailCtrl",resolve:{comments:["$stateParams","request",function(a,b){return b.getComments(a.id).then(function(a){return a},function(a){return a})}]}}).state("main.home.loaddata.budget",{url:"/presupuesto",templateUrl:"views/budget.html",controller:"BudgetCtrl","abstract":!0,resolve:{budgetData:["$stateParams","budget",function(a,b){return b.getByRequestId(a.id).then(function(a){return a},function(a){return a})}]}}).state("main.home.loaddata.budget.originalbudget",{url:"/original",templateUrl:"views/originalbudget.html",controller:"BudgetCtrl"}).state("main.home.loaddata.budget.currentbudget",{url:"/modificado",templateUrl:"views/currentbudget.html",controller:"BudgetCtrl"}).state("main.home.loaddata.survey",{url:"/encuesta",templateUrl:"views/survey.html",controller:"SurveyCtrl",resolve:{formData:["$stateParams","request",function(a,b){return b.getForm(a.id).then(function(a){return a},function(a){return a})}]}}).state("main.home.loaddata.attached",{url:"/adjunto",templateUrl:"views/attached.html",controller:"AttachedCtrl"}).state("main.home.loaddata.decision",{url:"/accion",templateUrl:"views/decision.html",controller:"DecisionCtrl",resolve:{comments:["$stateParams","request",function(a,b){return b.getComments(a.id).then(function(a){return a},function(a){return a})}]}}).state("main.home.guaranteeletterlist",{url:"/cartaaval?guaranteeId&statusId&requestId&firstName&lastName&BidentityCard&policyId",templateUrl:"views/guaranteelist.html",controller:"GuaranteelistCtrl",resolve:{response:["$stateParams","guaranteeletter",function(a,b){var c={guaranteeId:a.guaranteeId,requestId:a.requestId,statusId:a.selectedFilter,policyId:a.policyId,firstName:a.firstName,lastName:a.lastName,BidentityCard:a.BidentityCard,page:1,pageSize:6};return b.getGuaranteeQS(c).then(function(a){return a},function(a){return a})}]}}).state("main.home.guaranteeletterdetail",{url:"/cartaaval/:id/detalles",templateUrl:"views/guaranteeletterdetail.html",controller:"GuaranteeletterdetailCtrl",resolve:{response:["$stateParams","guaranteeletter",function(a,b){return b.getGuaranteeLetterById(a.id).then(function(a){return a},function(a){return a})}]}})}]).config(["localStorageServiceProvider",function(a){a.setPrefix("VCWebApp")}]).run(["$state",function(a){a.go("login")}]),angular.module("frontend2App").controller("MainCtrl",function(){this.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}),$(document).ready(function(){$(".alert").addClass("in").fadeOut(4500),$("[data-toggle=collapse]").click(function(){console.log("epa"),$(this).find("i").toggleClass("glyphicon-chevron-right glyphicon-chevron-down")})}),angular.module("frontend2App").controller("LoginCtrl",["$scope","$log","$state","toastr","session",function(a,b,c,d,e){a.login={},a.submit=function(f){if(f){var g={userName:a.login.identityCard,password:a.login.password};e.login(g).then(function(a){e.setToken(a.data.token),e.setCurrentUser(a.data);var b=e.getCurrentUser();"administrador"==b.userProfile?c.go("main.home.personlist"):c.go("main.home.requestlist",{filter:""})},function(c){b.log(c.status),a.login={},404==c.status?d.warning("Cédula y/o contraseña errónea","Error"):500==c.status&&d.error("Ocurrió un error. Intente de nuevo.","Error")})}}}]),angular.module("frontend2App").directive("header",["$state","toastr","guaranteeletter","session","$uibModal",function(a,b,c,d,e){return{templateUrl:"views/header.html",restrict:"E",scope:{code:"="},link:function(b,c,f,g){b.search=function(){var c=d.getCurrentUser();"analista"==c.userProfile?a.go("main.home.guaranteeletterdetail",{id:b.code}):a.go("main.home.loaddata.requestdetail",{id:b.code})},b.filter=function(){var a=e.open({animation:!0,templateUrl:"views/filterguarantee.html",controller:"FilterguaranteeCtrl",size:"md"});a.result.then(function(a){console.log("Filtrado")},function(){console.log("Modal dismissed at: "+new Date)})}},controller:["$scope","$state","session","guaranteeletter",function(a,b,c,d){a.user=c.getCurrentUser(),"analista"==a.user.userProfile?a.placeholder="Código carta aval":a.placeholder="Código visita clínica",a.logout=function(){c.logout().then(function(a){b.go("login")},function(a){console.log("Ocurrió un error"),b.go("login")})}}]}}]),angular.module("frontend2App").factory("session",["vcrestangular","localStorageService",function(a,b){var c={};return c.login=function(b){return a.all("session").post(b)},c.logout=function(){var c=b.get("token");return b.remove("token"),a.all("session").remove({},{token:c})},c.setToken=function(a){b.set("token",a)},c.getToken=function(){return b.get("token")},c.setCurrentUser=function(a){var c={userId:a.userId,firstName:a.user.person.firstName,lastName:a.user.person.lastName,identityCard:a.user.person.identityCard,email:a.user.person.email,userProfile:a.user.profile.profile,state:a.user.person.state.stateName};b.set("currentUser",c)},c.getCurrentUser=function(){return b.get("currentUser")},c}]),angular.module("frontend2App").factory("vcrestangular",["Restangular","baseUrl",function(a,b){var c=b;return a.withConfig(function(a){a.setBaseUrl(c),a.setFullResponse(!0)})}]),angular.module("frontend2App").controller("HomeCtrl",function(){this.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}),angular.module("frontend2App").directive("sidebar",["$rootScope",function(a){return{templateUrl:"views/sidebar.html",restrict:"E",scope:{},controller:["$scope","$rootScope","$state","session",function(a,b,c,d){a.user=d.getCurrentUser(),b.$watch("statusGroups",function(){if(b.statusGroups){a.porAsignarse=a.asignadas=a.atendidas=a.enRevision=a.completadas="";for(var c=0;c<b.statusGroups.length;c++)"por asignar"==b.statusGroups[c].status?a.porAsignarse=b.statusGroups[c].cantidad:"asignada"==b.statusGroups[c].status?a.asignadas=b.statusGroups[c].cantidad:"atendida"==b.statusGroups[c].status?a.atendidas=b.statusGroups[c].cantidad:"en revision"==b.statusGroups[c].status?a.enRevision=b.statusGroups[c].cantidad:a.completadas=b.statusGroups[c].cantidad}}),a.guaranteeFilter=function(a){var b={guaranteeId:null,requestId:null,statusId:a,policyId:null,firstName:null,lastName:null,BidentityCard:null};c.go("main.home.guaranteeletterlist",b)},a.refresh=function(){c.reload()},a.changeFilter=function(a){var b={guaranteeLetterId:null,requestId:null,statusId:a,page:1,pageSize:6,sd1:null,sd2:null};c.go("main.home.requestlist",b)},a.searchUsers=function(){c.go("main.home.userlist")},a.searchPersons=function(){c.go("main.home.personlist")}}]}}]),angular.module("frontend2App").controller("RequestlistCtrl",["$scope","$rootScope","$stateParams","$uibModal","$state","toastr","session","request","response",function(a,b,c,d,e,f,g,h,i){var j=6;a.selectedPage=0,a.user=g.getCurrentUser(),a.selectedFilter=c.filter,500==i.status?f.error("Ocurrió un error. Intente de nuevo.","Error"):(a.requests=i.data.requests,a.pages=i.data.pageCount,b.statusGroups=i.data.statusGroups),"analista"==a.user.userProfile?a.filters=[{filter:"Todas",statusId:""},{filter:"Por asignar",statusId:"2"},{filter:"Asignada",statusId:"3"},{filter:"Atendida",statusId:"4"},{filter:"En revisión",statusId:"5"},{filter:"Finalizada",statusId:"6"}]:"coordinador"==a.user.userProfile?a.filters=[{filter:"Todas",statusId:""},{filter:"Por asignar",statusId:"2"},{filter:"Asignada",statusId:"3"},{filter:"Atendida",statusId:"4"},{filter:"En revisión",statusId:"5"},{filter:"Finalizada",statusId:"6"}]:a.filters=[{filter:"Todas",statusId:""},{filter:"Por atender",statusId:"3"},{filter:"Atendida",statusId:"4"},{filter:"En revisión",statusId:"5"},{filter:"Finalizada",statusId:"6"}],a.category=function(){return c.guaranteeLetterId||c.requestId||c.sd1||c.sd2?"Resultados de la búsqueda":c.statusId?2==c.statusId?"No asignadas":3==c.statusId?"visitador"==a.user.userProfile?"Por atender":"Asignadas":4==c.statusId?"Atendidas":5==c.statusId?"En revisión":"Finalizadas":"Todas"},a.filter=function(){var a=d.open({animation:!0,templateUrl:"views/filtermodal.html",controller:"FiltermodalCtrl",size:"md"});a.result.then(function(){},function(){console.log("Modal dismissed at: "+new Date)})},a.statusText=function(b){if("analista"==a.user.userProfile){if("por asignar"==b)return"por asignar";if("asignada"==b)return"asignada";if("atendida"==b)return"atendida";if("en revision"==b)return"en revision";if("finalizada"==b)return"finalizada"}if("coordinador"==a.user.userProfile){if("por asignar"==b)return"por asignar";if("asignada"==b)return"asignada";if("atendida"==b)return"atendida";if("en revision"==b)return"en revision";if("finalizada"==b)return"finalizada"}if("visitador"==a.user.userProfile){if("asignada"==b)return"por atender";if("atendida"==b)return"atendida";if("en revision"==b)return"en revision";if("finalizada"==b)return"finalizada"}},a.selectChanged=function(){k(1),a.selectedPage=0};var k=function(d){var e={guaranteeLetterId:c.guaranteeLetterId,requestId:c.requestId,statusId:c.statusId,page:d,pageSize:j,sd1:c.sd1,sd2:c.sd2};h.getRequest(e).then(function(c){a.requests=c.data.requests,a.pages=c.data.pageCount,b.statusGroups=c.data.statusGroups},function(a){500==a.status&&f.error("Ocurrió un error. Intente de nuevo.","Error")})};a.status=function(b){if("analista"==a.user.userProfile){if("por asignar"==b)return"label-danger";if("asignada"==b)return"label-primary";if("atendida"==b)return"label-info";if("en revision"==b)return"label-warning";if("finalizada"==b)return"label-default"}if("coordinador"==a.user.userProfile){if("por asignar"==b)return"label-danger";if("asignada"==b)return"label-primary";if("atendida"==b)return"label-info";if("en revision"==b)return"label-warning";if("finalizada"==b)return"label-default"}if("visitador"==a.user.userProfile){if("asignada"==b)return"label-danger";if("atendida"==b)return"label-info";if("en revision"==b)return"label-warning";if("finalizada"==b)return"label-default"}},a.date=function(a){var b=new Date(a);"Last Sync: "+b.getDate()+"/"+(b.getMonth()+1)+"/"+b.getFullYear()+" @ "+b.getHours()+":"+b.getMinutes()+":"+b.getSeconds();return b.getDate()+"/"+(b.getMonth()+1)+"/"+b.getFullYear()},a.pageSelected=function(b){a.selectedPage=b,k(a.selectedPage+1)},a.previousPage=function(){a.selectedPage-1>=0?(a.selectedPage--,k(a.selectedPage+1)):console.log("extremo izquierdo")},a.nextPage=function(){a.selectedPage+1<a.pages?(a.selectedPage++,k(a.selectedPage+1)):console.log("extremo derecho")},a.detail=function(a){e.go("main.home.loaddata.requestdetail",{id:a})}}]),angular.module("frontend2App").factory("request",["vcrestangular","localStorageService",function(a,b){var c={};return c.getRequest=function(c){return a.all("me").get("request",c,{token:b.get("token")})},c.getForm=function(c){return a.all("request").get(c+"/form",{},{token:b.get("token")})},c.getComments=function(c){return a.all("request").get(c+"/comment",{},{token:b.get("token")})},c.postRequest=function(c){return a.all("request").post(c,{},{token:b.get("token")})},c.partialUpdate=function(c){return a.all("request/"+c.id).patch(c,{},{token:b.get("token")})},c.getById=function(c){return a.all("request").get(c,{},{token:b.get("token")})},c.postBudgetImage=function(c,d){for(var e=new FormData,f=0;f<d.length;f++)e.append("file",d[f]);return a.one("request/"+c+"/budget/image").withHttpConfig({transformRequest:angular.identity}).customPOST(e,"",{},{"Content-Type":void 0,token:b.get("token")})},c.postFormImage=function(c,d){for(var e=new FormData,f=0;f<d.length;f++)e.append("file",d[f]);return a.one("request/"+c+"/form/image").withHttpConfig({transformRequest:angular.identity}).customPOST(e,"",{},{"Content-Type":void 0,token:b.get("token")})},c.getRequestQS=function(c){return a.all("me").get("request",c,{token:b.get("token")})},c}]),angular.module("frontend2App").controller("RequestdetailCtrl",["$rootScope","$scope","$stateParams","$uibModal","$state","toastr","session","user","request","budget","response","baseUrl","comment","comments",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){var o=10;b.user=g.getCurrentUser(),b.request=k.data,b.comments=n.data.comment,b.downloadBudget=function(){window.open(l+"/document/budget/"+b.request.guaranteeLetter.budget.id)},b.downloadGuarantee=function(){window.open(l+"/document/guaranteeLetter/"+b.request.guaranteeLetterId)},b.downloadSurvey=function(){window.open(l+"/document/form/request/"+b.request.id)},b.load=function(){e.go("main.home.loaddata.budget",{id:b.request.id})},b.assign=function(){h.getVisitors(1,o).then(function(e){var g=d.open({animation:!0,templateUrl:"views/assignvisitormodal.html",controller:"AssignvisitormodalCtrl",size:"lg",resolve:{data:function(){return e.data}}});g.result.then(function(d){var e=d.visitor,g=d.coment;g&&m.post({requestId:c.id,comment:g}).then(function(a){i.getComments(c.id).then(function(a){b.comments=a.data.comment},function(a){console.log("error trayendo la lista de observaciones")})},function(a){console.log("error 500 con la observación")}),i.partialUpdate({id:b.request.id,visitorId:e.id,statusId:3}).then(function(c){c.data.created?f.warning("Otro coordinador acaba de asignar esta visita.","Atención"):f.success("Asignación hecha con éxito.","Listo"),b.request=c.data,a.statusGroups=c.data.statusGroups},function(a){500==a.status&&f.error("Ocurrió un error. Intente de nuevo.","Error")})},function(){console.log("Modal dismissed at: "+new Date)})},function(a){500==a.status&&f.error("Ocurrió un error. Intente de nuevo.","Error")})},b.gender=function(a){return"M"==a?"Masculino":"Femenino"},b.date=function(a){var b=new Date(a);"Last Sync: "+b.getDate()+"/"+(b.getMonth()+1)+"/"+b.getFullYear()+" @ "+b.getHours()+":"+b.getMinutes()+":"+b.getSeconds();return b.getDate()+"/"+(b.getMonth()+1)+"/"+b.getFullYear()},b.age=function(a){var b=new Date;a=a.split("T")[0].split("-");var c=a[0],d=a[1],e=a[2],f=b.getFullYear()-c,g=b.getMonth()+1-d,h=b.getDay()-e;return(g>0||0==g&&h>=0)&&f++,f},b.hour=function(a){var b=new Date(a);"Last Sync: "+b.getDate()+"/"+(b.getMonth()+1)+"/"+b.getFullYear()+" @ "+b.getHours()+":"+b.getMinutes()+":"+b.getSeconds();return b.getHours()+":"+b.getMinutes()},b.info=function(){if("visitador"==b.user.userProfile){if("atendida"==b.request.status.status)return"Solicitud atendida.";if("en revision"==b.request.status.status)return"Solicitud de visita en revisión.";if("asignada"==b.request.status.status)return"Solicitud de visita pendiente.";if("finalizada"==b.request.status.status)return"Solicitud de visita completada."}if("coordinador"==b.user.userProfile){if("atendida"==b.request.status.status)return"Solicitud atendida.";if("en revision"==b.request.status.status)return"Solicitud de visita en revisión.";if("finalizada"==b.request.status.status)return"Solicitud de visita completada.";if("por asignar"==b.request.status.status)return"Solicitud de visita por asignar.";if("asignada"==b.request.status.status)return"Solicitud de visita asignada."}if("analista"==b.user.userProfile){if("atendida"==b.request.status.status)return"Solicitud atendida.";if("en revision"==b.request.status.status)return"Solicitud de visita en revisión.";if("finalizada"==b.request.status.status)return"Solicitud de visita completada.";if("por asignar"==b.request.status.status)return"Solicitud de visita por asignar.";if("asignada"==b.request.status.status)return"Solicitud por atender."}},b.infoClass=function(){return"atendida"==b.request.status.status?"alert-info":"en revision"==b.request.status.status?"alert-danger":"asignada"==b.request.status.status?"alert-danger":"finalizada"==b.request.status.status?"alert-success":"por asignar"==b.request.status.status?"alert-danger":void 0},b.canReview=function(){return"atendida"==b.request.status.status?!0:!1},b.showButton=function(){return"asignada"==b.request.status.status||"en revision"==b.request.status.status?!0:!1},b.canAssign=function(){return"por asignar"==b.request.status.status?!0:void 0},b.finish=function(){var e=d.open({animation:!0,templateUrl:"views/comment.html",controller:"CommentCtrl",size:"md"});e.result.then(function(d){d&&m.post({requestId:c.id,comment:d}).then(function(a){i.getComments(c.id).then(function(a){b.comments=a.data.comment},function(a){console.log("error trayendo la lista de observaciones")})},function(a){console.log("error 500 con la observación")}),i.partialUpdate({id:c.id,statusId:4}).then(function(c){b.request=c.data,k.data=c.data,f.success("Finalización hecha con éxito.","Listo"),a.statusGroups=c.data.statusGroups},function(a){f.error("Ocurrió un error. Intente de nuevo.","Error")})},function(){console.log("Modal dismissed at: "+new Date)})},b.review=function(){var e=d.open({animation:!0,templateUrl:"views/comment.html",controller:"CommentCtrl",size:"md"});e.result.then(function(d){d&&m.post({requestId:c.id,comment:d}).then(function(a){i.getComments(c.id).then(function(a){b.comments=a.data.comment},function(a){console.log("error trayendo la lista de observaciones")})},function(a){console.log("error 500 con la observación")}),i.partialUpdate({id:c.id,statusId:5}).then(function(c){b.request=c.data,k.data=c.data,f.success("Envío a revisión hecho con éxito.","Listo"),a.statusGroups=c.data.statusGroups},function(a){f.error("Ocurrió un error. Intente de nuevo.","Error")})},function(){console.log("Modal dismissed at: "+new Date)})},b.authorize=function(){var e=d.open({animation:!0,templateUrl:"views/comment.html",controller:"CommentCtrl",size:"md"});e.result.then(function(d){d&&m.post({requestId:c.id,comment:d}).then(function(a){i.getComments(c.id).then(function(a){b.comments=a.data.comment},function(a){console.log("error trayendo la lista de observaciones")})},function(a){console.log("error 500 con la observación")}),i.partialUpdate({id:c.id,statusId:6}).then(function(c){b.request=c.data,k.data=c.data,f.success("Autorización hecha con éxito.","Listo"),a.statusGroups=c.data.statusGroups},function(a){f.error("Ocurrió un error. Intente de nuevo.","Error")})},function(){console.log("Modal dismissed at: "+new Date)})}}]),angular.module("frontend2App").controller("AssignvisitormodalCtrl",["$rootScope","$scope","$uibModalInstance","data","user",function(a,b,c,d,e){var f=10;b.selectedPage=0,b.visitors=d.users,b.pages=d.pageCount;var g=function(c){e.getVisitors(c,f).then(function(c){b.visitor=null,b.visitors=c.data.users,b.pages=c.data.pageCount,a.statusGroups=c.data.statusGroups},function(a){500==a.status&&toastr.error("Ocurrió un error. Intente de nuevo.","Error")})};b.pageSelected=function(a){b.selectedPage=a,g(b.selectedPage+1)},b.previousPage=function(){b.selectedPage-1>=0?(b.selectedPage--,g(b.selectedPage+1)):console.log("extremo izquierdo")},b.nextPage=function(){b.selectedPage+1<b.pages?(b.selectedPage++,g(b.selectedPage+1)):console.log("extremo derecho")},b.assign=function(a){c.close(a)},b.ok=function(){c.close({visitor:b.visitor,coment:b.coment})},b.canAssign=function(){return b.visitor?!1:!0},b.cancel=function(){c.dismiss("cancel")}}]),angular.module("frontend2App").factory("user",["vcrestangular","localStorageService",function(a,b){var c=9,d={};return d.getVisitors=function(d,e){return a.all("user").get("",{page:d,pageSize:e,profile:c},{token:b.get("token")})},d.postUser=function(c){return a.all("user").post(c,{},{token:b.get("token")})},d.partialUpdate=function(c){return a.all("user/"+c.id).patch(c,{},{token:b.get("token")})},d}]),angular.module("frontend2App").factory("guaranteeletter",["vcrestangular","localStorageService",function(a,b){var c={};return c.getGuaranteeLetterById=function(c){return a.all("guaranteeLetter").get(c,{},{token:b.get("token")})},c.getGuaranteeQS=function(c){return a.all("guaranteeLetter").get("",c,{token:b.get("token")})},c}]),angular.module("frontend2App").controller("GuaranteeletterdetailCtrl",["$rootScope","$scope","$state","$stateParams","$uibModal","toastr","request","session","baseUrl","response",function(a,b,c,d,e,f,g,h,i,j){b.user=h.getCurrentUser(),a.statusGroups=j.data.statusGroups,j.data.id?(b.guaranteeLetter=j.data,j.data.request.length?b.history=j.data.request:b.history=null):(b.guaranteeLetter=null,f.error("No se encontró carta aval asociada al código.","Error")),b.downloadBudget=function(){window.open(i+"/document/budget/"+b.guaranteeLetter.budget.id)},b.downloadGuarantee=function(){window.open(i+"/document/guaranteeLetter/"+b.guaranteeLetter.id)},b.statusText=function(a){if("analista"==b.user.userProfile){if("por asignar"==a)return"por asignar";if("asignada"==a)return"asignada";if("atendida"==a)return"atendida";if("en revision"==a)return"en revision";if("completada"==a)return"completada";if("finalizada"==a)return"finalizada"}if("coordinador"==b.user.userProfile){if("por asignar"==a)return"por asignar";if("asignada"==a)return"asignada";if("atendida"==a)return"atendida";if("en revision"==a)return"en revision";if("completada"==a)return"completada";if("finalizada"==a)return"finalizada"}if("visitador"==b.user.userProfile){if("asignada"==a)return"pendiente";if("atendida"==a)return"atendida";if("en revision"==a)return"en revision";if("completada"==a)return"completada";if("finalizada"==a)return"finalizada"}},b.status2=function(a){if("analista"==b.user.userProfile){if("por asignar"==a)return"label-danger";if("asignada"==a)return"label-primary";if("atendida"==a)return"label-info";if("en revision"==a)return"label-warning";if("completada"==a)return"label-success";if("finalizada"==a)return"label-default"}if("coordinador"==b.user.userProfile){if("por asignar"==a)return"label-danger";if("asignada"==a)return"label-primary";if("atendida"==a)return"label-info";if("en revision"==a)return"label-warning";if("completada"==a)return"label-success";if("finalizada"==a)return"label-default"}if("visitador"==b.user.userProfile){if("asignada"==a)return"label-danger";if("atendida"==a)return"label-info";if("en revision"==a)return"label-warning";if("completada"==a)return"label-success";if("finalizada"==a)return"label-default"}},b.statusText2=function(a){var b=a.startDate.split("T")[0].split("-"),c=a.endDate.split("T")[0].split("-");return b[0]>c[0]?"vencida":b[1]>c[1]?"vencida":b[2]>c[2]?"vencida":a.status.status},b.statusColor2=function(a){var b=a.startDate.split("T")[0].split("-"),c=a.endDate.split("T")[0].split("-");return b[0]>c[0]?"label-danger":b[1]>c[1]?"label-danger":b[2]>c[2]?"label-danger":"label-success"},b.status=function(a){return"activada"==a?"label-success":"label-default"},b.date=function(a){var b=new Date(a);"Last Sync: "+b.getDate()+"/"+(b.getMonth()+1)+"/"+b.getFullYear()+" @ "+b.getHours()+":"+b.getMinutes()+":"+b.getSeconds();return b.getDate()+"/"+(b.getMonth()+1)+"/"+b.getFullYear()},b.gender=function(a){return"M"==a?"MASCULINO":"FEMENINO"},b.age=function(a){var b=new Date;a=a.split("T")[0].split("-");var c=a[0],d=a[1],e=a[2],f=b.getFullYear()-c,g=b.getMonth()+1-d,h=b.getDay()-e;return(g>0||0==g&&h>=0)&&f++,f},b.detail=function(a){c.go("main.home.loaddata.requestdetail",{id:a})},b.canRequest=function(){var a=b.guaranteeLetter.startDate.split("T")[0].split("-"),c=b.guaranteeLetter.endDate.split("T")[0].split("-");if(a[0]>c[0])return!1;if(a[1]>c[1])return!1;if(a[2]>c[2])return!1;if(!b.history)return!0;for(var d=0;d<b.history.length;d++)if(6!=b.history[d].status.id)return!1;return!0},b.postRequest=function(){var c=e.open({animation:!0,templateUrl:"views/requestmodal.html",controller:"RequestmodalCtrl",size:"md"});c.result.then(function(c){g.postRequest({guaranteeLetterId:b.guaranteeLetter.id,comment:c.comment,endDate:c.date}).then(function(c){c.data.created?f.warning("Otro analista acaba de solicitar una visita para esta carta aval.","Atención"):f.success("Solicitud de visita generada con éxito.","Listo"),b.guaranteeLetter.request={id:c.data.id,guaranteeLetterId:c.data.guaranteeLetterId,statusId:c.data.statusId,coordinatorId:c.data.coordinatorId,visitorId:c.data.visitorId,analystId:c.data.analystId,formId:c.data.formId,startDate:c.data.startDate,endDate:c.data.endDate,status:c.data.status},b.history?b.history.push(b.guaranteeLetter.request):b.history=[b.guaranteeLetter.request],a.statusGroups=c.data.statusGroups},function(a){500==a.status&&f.error("Ocurrió un error. Intente de nuevo.","Error")})},function(){console.log("Modal dismissed at: "+new Date)})}}]),angular.module("frontend2App").controller("InitCtrl",["$rootScope","$state","session",function(a,b,c){if(c.getToken()){var d=c.getCurrentUser();"administrador"==d.userProfile?b.go("main.home.personlist"):b.go("main.home.requestlist",{filter:""})}else b.go("login")}]),angular.module("frontend2App").factory("helpers",["$rootScope",function(a){var b={},c=0,d=0,e=0,f=0,g=0;return b.cargar=function(){for(var b=0;b<a.statusGroups.length;b++)"por asignar"==a.statusGroups[b].status?c=a.statusGroups[b].cantidad:"asignada"==a.statusGroups[b].status?d=a.statusGroups[b].cantidad:"atendidas"==a.statusGroups[b].status?e=a.statusGroups[b].cantidad:"en revision"==a.statusGroups[b].status?f=a.statusGroups[b].cantidad:finalizadas=a.statusGroups[b].cantidad},b.porAsignar=function(){return c},b.asignada=function(){return d},b.atendida=function(){return e},b.enRevision=function(){return f},b.finalizada=function(){return g},b}]),angular.module("frontend2App").controller("LoaddataCtrl",["$scope","$state","$stateParams","toastr","session","response",function(a,b,c,d,e,f){a.user=e.getCurrentUser(),400!=f.status&&404!=f.status&&500!=f.status?a.response=f.data:d.error("No se encontró visita asociada al código.","Error"),a.title=function(){return a.response?"Información de la visita clínica asociada al código: "+c.id:"No se encontró visita clínica asociada código."},a.decision=function(){return"visitador"==a.user.userProfile?"Finalización":"coordinador"==a.user.userProfile?"Autorización":"Algo"},a.iconClass=function(){return"visitador"==a.user.userProfile?"glyphicon glyphicon-ok-sign":"coordinador"==a.user.userProfile?"glyphicon glyphicon-question-sign":"Algo"},a.shouldBeActive=function(){return b.includes("main.home.loaddata.budget.originalbudget")||b.includes("main.home.loaddata.budget.currentbudget")}}]),angular.module("frontend2App").factory("budget",["vcrestangular","localStorageService",function(a,b){var c={};return c.getById=function(c){return a.all("budget").get(c,{},{token:b.get("token")})},c.getByRequestId=function(c){return a.all("budget").get("",{requestId:c},{token:b.get("token")})},c.postBudget=function(c){return a.all("budget").post(c,{},{token:b.get("token")})},c.postDocument=function(c,d){for(var e=new FormData,f=0;f<d.length;f++)e.append("file",d[f]);return a.one("budget/"+c+"/document").withHttpConfig({transformRequest:angular.identity}).customPOST(e,"",{},{"Content-Type":void 0,token:b.get("token")})},c}]),angular.module("frontend2App").controller("BudgetCtrl",["$rootScope","$scope","$uibModal","toastr","budgetData","session","budget","response",function(a,b,c,d,e,f,g,h){b.budget=e.data;var i=[];b.budget.currentBudget.id?(b.currentBudget=b.budget.currentBudget,b.currentBudget.flag=b.budget.currentBudget.id):(b.currentBudget=angular.copy(b.budget),b.currentBudget.flag=-1);var j=function(){for(var a=0,c=0;c<b.budget.item.length;c++)a+=b.budget.item[c].cost*b.budget.item[c].quantity;a=a.toFixed(2),a=parseFloat(a),a=a.toLocaleString("de-DE"),b.cost=a};b.formattedCost=function(a){return a=a.toFixed(2),a=parseFloat(a),a=a.toLocaleString("de-DE")};var k=function(){for(var a=0,c=0;c<b.currentBudget.item.length;c++)a+=b.currentBudget.item[c].cost*b.currentBudget.item[c].quantity;a=a.toFixed(2),a=parseFloat(a),a=a.toLocaleString("de-DE"),b.currentCost=a};j(),k(),b.canEdit=function(){return"3"==h.data.statusId||"5"==h.data.statusId?!0:!1},b.user=f.getCurrentUser(),b.edit=function(a,d){var e=c.open({animation:!0,templateUrl:"views/edititemmodal.html",controller:"EdititemmodalCtrl",size:"lg",resolve:{data:function(){return angular.copy(a)}}});e.result.then(function(a){i[d]=!0,b.currentBudget.item[d]=a,k()},function(){console.log("Modal dismissed at: "+new Date)})},b.edited=function(a){return i[a]},b.loadBudget=function(){for(var a={id:b.currentBudget.flag,parentBudgetId:b.currentBudget.id,items:[]},c=0;c<b.currentBudget.item.length;c++){var f=b.currentBudget.item[c];delete f.id,delete f.historical,delete f.budgetId,a.items[c]=b.currentBudget.item[c]}g.postBudget(a).then(function(a){d.success("Cambios hechos con éxito.","Listo"),e.data.currentBudget=a.data,b.budget.currentBudget=a.data,b.currentBudget=a.data,b.currentBudget.flag=a.data.id,i=[]},function(a){500==a.status&&d.error("Ocurrió un error. Intente de nuevo.","Error")})}}]),angular.module("frontend2App").controller("SurveyCtrl",["$scope","$stateParams","toastr","session","response","formData","survey",function(a,b,c,d,e,f,g){a.user=d.getCurrentUser(),a.form=f.data.form,a.values=[];for(var h=0;h<a.form.question.length;h++)a.form.question[h].answer&&(a.values[h]=a.form.question[h].answer.answer);a.loadData=function(){for(var d=[],e=0;e<a.form.question.length;e++)d.push({requestId:b.id,questionId:a.form.question[e].id,answer:a.values[e]});g.postAnswer(b.id,d).then(function(a){c.success("Carga hecha con éxito.","Listo")},function(a){500==a.status&&c.error("Ocurrió un error. Intente de nuevo.","Error")})},a.disabled=function(){return"visitador"!=a.user.userProfile||"3"!=e.data.statusId&&"5"!=e.data.statusId?!0:!1}}]),angular.module("frontend2App").controller("EdititemmodalCtrl",["$scope","$uibModalInstance","toastr","data","item",function(a,b,c,d,e){a.it=d,a.history=!1,a.historyText="Ver historial de cambios",a.historical=d.historical,a.toggleHistory=function(){a.history?(a.history=!1,a.historyText="Ver historial de cambios"):(a.history=!0,a.historyText="Ocultar historial de cambios")},a.edited=function(c){b.close(a.it)},a.cancel=function(){b.dismiss("cancel")}}]),angular.module("frontend2App").factory("item",["vcrestangular","localStorageService",function(a,b){var c={};return c.partialUpdate=function(c){
return a.all("item/"+c.id).patch(c,{},{token:b.get("token")})},c}]),angular.module("frontend2App").controller("AttachedCtrl",["$scope","$stateParams","$rootScope","toastr","response","request","baseUrl",function(a,b,c,d,e,f,g){a.budgetFiles=[],a.surveyFiles=[],a.images1=[],a.images2=[],a.budgetPaths=e.data.budgetImage,a.surveyPaths=e.data.formImage;var h=function(){for(var b=[],c=0;c<a.budgetPaths.length;c++){var d=a.budgetPaths[c].path;d=d.replace(/ /g,"%20"),b.push({thumbUrl:g+"/image/"+d,url:g+"/image/"+a.budgetPaths[c].path,extUrl:g+"/image/"+a.budgetPaths[c].path})}a.images1=b},i=function(){for(var b=[],c=0;c<a.surveyPaths.length;c++){var d=a.surveyPaths[c].path;d=d.replace(/ /g,"%20"),b.push({thumbUrl:g+"/image/"+d,url:g+"/image/"+a.surveyPaths[c].path,extUrl:g+"/image/"+a.surveyPaths[c].path})}a.images2=b};h(),i(),a.loadable=function(){return a.budgetFiles.length>=1&&a.surveyFiles.length>=1?!1:!0},a.loadData=function(){f.postBudgetImage(e.data.id,a.budgetFiles).then(function(b){e.data.budgetImage=b.data.path,f.postFormImage(e.data.id,a.surveyFiles).then(function(c){a.budgetFiles=[],a.surveyFiles=[],a.budgetPaths=b.data.path,a.surveyPaths=c.data.path,e.data.formImage=c.data.path,h(),i(),d.success("Carga hecha con éxito.","Listo")},function(a){d.error("Ocurrió un error. Intente de nuevo.","Error")})},function(a){d.error("Ocurrió un error. Intente de nuevo.","Error")})},a.viewImage=function(a){window.open(g+"/image/"+a)},a.budgetLoaded=function(b){b.size<=2099734?a.$apply(function(){a.budgetFiles.push(b)}):(console.log("Más de 2 MB"),d.error("La imagen seleccionada supera los 2 MB.","Error"))},a.removeBudget=function(b){a.budgetFiles.splice(b,1)},a.budgetUpload=function(){angular.element("#upload1").trigger("click")},a.surveyLoaded=function(b){b.size<=2099734?a.$apply(function(){a.surveyFiles.push(b)}):console.log("Más de 2 MB")},a.removeSurvey=function(b){a.surveyFiles.splice(b,1)},a.surveyUpload=function(){angular.element("#upload2").trigger("click")},a.methods1={},a.methods2={},a.openGallery=function(){a.methods1.open(),a.methods2.open()},a.closeGallery=function(){a.methods1.close(),a.methods2.close()},a.nextImg=function(){a.methods1.next(),a.methods2.next()},a.prevImg=function(){a.methods1.prev(),a.methods2.prev()},a.disabled=function(){return"visitador"!=a.user.userProfile||"3"!=e.data.statusId&&"5"!=e.data.statusId?!0:!1}}]),angular.module("frontend2App").factory("survey",["vcrestangular","localStorageService",function(a,b){var c={};return c.getByRequestId=function(c){return a.all("form").get("",{requestId:c},{token:b.get("token")})},c.postAnswer=function(c,d){return a.all("request/"+c+"/answer").post({data:d},{},{token:b.get("token")})},c.postDocument=function(c,d){for(var e=new FormData,f=0;f<d.length;f++)e.append("file",d[f]);return a.one("form/"+c+"/document").withHttpConfig({transformRequest:angular.identity}).customPOST(e,"",{},{"Content-Type":void 0,token:b.get("token")})},c}]),angular.module("frontend2App").controller("DecisionCtrl",["$scope","$stateParams","$rootScope","$uibModal","toastr","session","request","comment","response","comments",function(a,b,c,d,e,f,g,h,i,j){a.user=f.getCurrentUser(),a.comments=j.data.comment,a.infoClass=function(){return"atendida"==i.data.status.status?"alert-info":"en revision"==i.data.status.status?"alert-danger":"asignada"==i.data.status.status?"alert-danger":"finalizada"==i.data.status.status?"alert-success":void 0},a.showInfo=function(){return!0},a.info=function(){if("visitador"==a.user.userProfile){if("atendida"==i.data.status.status)return"Solicitud atendida.";if("en revision"==i.data.status.status)return"Solicitud de visita en revisión.";if("asignada"==i.data.status.status)return"Solicitud de visita pendiente."}if("coordinador"==a.user.userProfile){if("atendida"==i.data.status.status)return"Solicitud atendida.";if("en revision"==i.data.status.status)return"Solicitud de visita en revisión.";if("finalizada"==i.data.status.status)return"Solicitud de visita completada."}},a.canAuthorize=function(){return"atendida"==i.data.status.status?!0:void 0},a.canReview=function(){return"atendida"==i.data.status.status?!0:void 0},a.showButton=function(){return"visitador"!=a.user.userProfile||"asignada"!=i.data.status.status&&"en revision"!=i.data.status.status?void 0:!0},a.date=function(a){a=a.split("T")[0].split("-");var b=a[0],c=a[1],d=a[2];return d+"/"+c+"/"+b},a.hour=function(a){console.log(a),a=a.split("T")[1].split(":"),console.log(a);var b=a[0]+":"+a[1];return b},a.finish=function(){var f=d.open({animation:!0,templateUrl:"views/comment.html",controller:"CommentCtrl",size:"md"});f.result.then(function(d){d&&h.post({requestId:b.id,comment:d}).then(function(c){g.getComments(b.id).then(function(b){a.comments=b.data.comment},function(a){console.log("error trayendo la lista de observaciones")})},function(a){console.log("error 500 con la observación")}),g.partialUpdate({id:b.id,statusId:4}).then(function(a){i.data=a.data,e.success("Finalización hecha con éxito.","Listo"),c.statusGroups=a.data.statusGroups},function(a){e.error("Ocurrió un error. Intente de nuevo.","Error")})},function(){console.log("Modal dismissed at: "+new Date)})},a.review=function(){var f=d.open({animation:!0,templateUrl:"views/comment.html",controller:"CommentCtrl",size:"md"});f.result.then(function(d){d&&h.post({requestId:b.id,comment:d}).then(function(c){g.getComments(b.id).then(function(b){a.comments=b.data.comment},function(a){console.log("error trayendo la lista de observaciones")})},function(a){console.log("error 500 con la observación")}),g.partialUpdate({id:b.id,statusId:5}).then(function(a){i.data=a.data,e.success("Envío a revisión hecho con éxito.","Listo"),c.statusGroups=a.data.statusGroups},function(a){e.error("Ocurrió un error. Intente de nuevo.","Error")})},function(){console.log("Modal dismissed at: "+new Date)})},a.authorize=function(){var f=d.open({animation:!0,templateUrl:"views/comment.html",controller:"CommentCtrl",size:"md"});f.result.then(function(d){d&&h.post({requestId:b.id,comment:d}).then(function(c){g.getComments(b.id).then(function(b){a.comments=b.data.comment},function(a){console.log("error trayendo la lista de observaciones")})},function(a){console.log("error 500 con la observación")}),g.partialUpdate({id:b.id,statusId:6}).then(function(a){i.data=a.data,i.data.status=a.data.status,e.success("Autorización hecha con éxito.","Listo"),c.statusGroups=a.data.statusGroups},function(a){e.error("Ocurrió un error. Intente de nuevo.","Error")})},function(){console.log("Modal dismissed at: "+new Date)})}}]),angular.module("frontend2App").constant("baseUrl","https://powerful-river-28315.herokuapp.com/api/v1"),angular.module("frontend2App").controller("FiltermodalCtrl",["$scope","$state","$uibModalInstance","toastr","session","request",function(a,b,c,d,e,f){a.user=e.getCurrentUser(),a.selectedFilter="",a.dateOptions={formatYear:"yyyy",startingDay:1},a.open1=function(){a.popup1.opened=!0},a.open2=function(){a.popup2.opened=!0},a.popup1={opened:!1},a.popup2={opened:!1};var g=["dd-MM-yyyy","yyyy/MM/dd","dd.MM.yyyy","shortDate"];a.format=g[0],"analista"==a.user.userProfile?a.filters=[{filter:"Todas",statusId:""},{filter:"Por asignar",statusId:"2"},{filter:"Asignada",statusId:"3"},{filter:"Atendida",statusId:"4"},{filter:"En revisión",statusId:"5"},{filter:"Finalizada",statusId:"6"}]:"coordinador"==a.user.userProfile?a.filters=[{filter:"Todas",statusId:""},{filter:"Por asignar",statusId:"2"},{filter:"Asignada",statusId:"3"},{filter:"Atendida",statusId:"4"},{filter:"En revisión",statusId:"5"},{filter:"Finalizada",statusId:"6"}]:a.filters=[{filter:"Todas",statusId:""},{filter:"Por atender",statusId:"3"},{filter:"Atendida",statusId:"4"},{filter:"En revisión",statusId:"5"},{filter:"Finalizada",statusId:"6"}],a.filter=function(){var d=a.dt1,e=a.dt2;a.dt1&&(d=new Date(a.dt1),d=d.getFullYear()+"-"+(d.getMonth()+1)+"-"+d.getDate()),a.dt2&&(e=new Date(a.dt2),e=e.getFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate()),c.close(),b.go("main.home.requestlist",{guaranteeLetterId:a.guaranteeId,requestId:a.requestId,statusId:a.selectedFilter,page:1,pageSize:6,sd1:d,sd2:e})},a.reset=function(){a.dt1=null,a.dt2=null,a.guaranteeId=null,a.guaranteeId=null,a.requestId=null,a.selectedFilter=""},a.cancel=function(){c.dismiss("cancel")}}]),angular.module("frontend2App").controller("FilterguaranteeCtrl",["$scope","$rootScope","$state","$uibModalInstance","toastr","session","guaranteeletter",function(a,b,c,d,e,f,g){a.user=f.getCurrentUser(),a.filters=[{filter:"Todas",statusId:""},{filter:"Activada",statusId:"1"}],a.status="",a.reset=function(){a.guaranteeId="",a.status="",a.firstName="",a.lastName="",a.BidentityCard="",a.policyId=""},a.filter=function(){d.close(),c.go("main.home.guaranteeletterlist",{guaranteeId:a.guaranteeId,requestId:a.requestId,statusId:a.selectedFilter,policyId:a.policyId,firstName:a.firstName,lastName:a.lastName,BidentityCard:a.BidentityCard,page:1,pageSize:6})},a.cancel=function(){d.dismiss("cancel")}}]),angular.module("frontend2App").controller("GuaranteelistCtrl",["$scope","$rootScope","$stateParams","$state","$uibModal","toastr","session","guaranteeletter","request","response",function(a,b,c,d,e,f,g,h,i,j){var k=6;a.selectedPage=0,a.params=null,a.user=g.getCurrentUser(),500==j.status?f.error("Ocurrió un error. Intente de nuevo.","Error"):(a.guarantees=j.data.guaranteeLetter,a.pages=j.data.pageCount);var l=function(d){var e={guaranteeId:c.guaranteeId,requestId:c.requestId,statusId:c.selectedFilter,policyId:c.policyId,firstName:c.firstName,lastName:c.lastName,BidentityCard:c.BidentityCard,page:d,pageSize:k};h.getGuaranteeQS(e).then(function(c){a.guarantees=c.data.guaranteeLetter,a.pages=c.data.pageCount,b.statusGroups=c.data.statusGroups},function(a){500==a.status&&f.error("Ocurrió un error. Intente de nuevo.","Error")})};a.filter=function(){var a=e.open({animation:!0,templateUrl:"views/filterguarantee.html",controller:"FilterguaranteeCtrl",size:"md"});a.result.then(function(){},function(){console.log("Modal dismissed at: "+new Date)})},a.date=function(a){var b=new Date(a);"Last Sync: "+b.getDate()+"/"+(b.getMonth()+1)+"/"+b.getFullYear()+" @ "+b.getHours()+":"+b.getMinutes()+":"+b.getSeconds();return b.getDate()+"/"+(b.getMonth()+1)+"/"+b.getFullYear()},a.pageSelected=function(b){a.selectedPage=b,l(a.selectedPage+1)},a.previousPage=function(){a.selectedPage-1>=0?(a.selectedPage--,l(a.selectedPage+1)):console.log("extremo izquierdo")},a.nextPage=function(){a.selectedPage+1<a.pages?(a.selectedPage++,l(a.selectedPage+1)):console.log("extremo derecho")},a.statusColor=function(a){var b=a.startDate.split("T")[0].split("-"),c=a.endDate.split("T")[0].split("-");return b[0]>c[0]?"label-danger":b[1]>c[1]?"label-danger":b[2]>c[2]?"label-danger":"label-success"},a.statusText=function(a){var b=a.startDate.split("T")[0].split("-"),c=a.endDate.split("T")[0].split("-");return b[0]>c[0]?"vencida":b[1]>c[1]?"vencida":b[2]>c[2]?"vencida":a.status.status},a.detail=function(a){d.go("main.home.guaranteeletterdetail",{id:a})},a.canRequest=function(a){var b=a.startDate.split("T")[0].split("-"),c=a.endDate.split("T")[0].split("-");if(b[0]>c[0])return!1;if(b[1]>c[1])return!1;if(b[2]>c[2])return!1;for(var d=0;d<a.request.length;d++)if(6!=a.request[d].status.id)return!1;return!0},a.postRequest=function(a){var c=e.open({animation:!0,templateUrl:"views/requestmodal.html",controller:"RequestmodalCtrl",size:"md"});c.result.then(function(c){i.postRequest({guaranteeLetterId:a,comment:c.comment,endDate:c.date}).then(function(a){a.data.created?f.warning("Otro analista acaba de solicitar una visita para esta carta aval.","Atención"):f.success("Solicitud de visita generada con éxito.","Listo"),b.statusGroups=a.data.statusGroups,d.reload()},function(a){500==a.status&&f.error("Ocurrió un error. Intente de nuevo.","Error")})},function(){console.log("Modal dismissed at: "+new Date)})}}]),angular.module("frontend2App").controller("CommentCtrl",["$scope","$uibModalInstance",function(a,b){a.ok=function(){b.close(a.coment)},a.cancel=function(){b.dismiss("cancel")}}]),angular.module("frontend2App").factory("comment",["vcrestangular","localStorageService",function(a,b){var c={};return c.post=function(c){return a.all("comment").post(c,{},{token:b.get("token")})},c}]),angular.module("frontend2App").controller("RequestmodalCtrl",["$scope","$uibModalInstance",function(a,b){a.open1=function(){a.popup1.opened=!0},a.popup1={opened:!1},a.dateOptions={formatYear:"yyyy",startingDay:1,minDate:new Date},a.validDate=function(){return a.dt1 instanceof Date};var c=["dd-MM-yyyy","yyyy/MM/dd","dd.MM.yyyy","shortDate"];a.format=c[0],a.ok=function(){b.close({comment:a.coment,date:a.dt1})},a.cancel=function(){b.dismiss("cancel")}}]),angular.module("frontend2App").controller("UserlistCtrl",["$scope","$state",function(a,b){console.log("UserlistCtrl")}]),angular.module("frontend2App").controller("PersonlistCtrl",["$scope","$stateParams","$state","toastr","$uibModal","person","response",function(a,b,c,d,e,f,g){var h=6;a.selectedPage=0,a.pages=0,500==g.status?d.error("Ocurrió un error. Intente de nuevo.","Error"):(a.persons=g.data.persons,a.pages=g.data.pageCount);var i=function(c){var e={identityCard:b.identityCard,firstName:b.firstName,lastName:b.lastName,profileId:b.profileId,stateId:b.stateId,page:c,pageSize:h};f.getPersonQS(e).then(function(b){a.persons=b.data.persons,a.pages=b.data.pageCount},function(a){500==a.status&&d.error("Ocurrió un error. Intente de nuevo.","Error")})};a.filter=function(){var a=e.open({animation:!0,templateUrl:"views/filterperson.html",controller:"FilterpersonCtrl",size:"sm"});a.result.then(function(){},function(){console.log("Modal dismissed at: "+new Date)})},a.pageSelected=function(b){a.selectedPage=b,i(a.selectedPage+1)},a.previousPage=function(){a.selectedPage-1>=0?(a.selectedPage--,i(a.selectedPage+1)):console.log("extremo izquierdo")},a.nextPage=function(){a.selectedPage+1<a.pages?(a.selectedPage++,i(a.selectedPage+1)):console.log("extremo derecho")},a.detail=function(a){c.go("main.home.persondetail",{id:a})}}]),angular.module("frontend2App").factory("person",["vcrestangular","localStorageService",function(a,b){var c={};return c.getPersonById=function(c){return a.all("person").get(c,{},{token:b.get("token")})},c.getPersonQS=function(c){return a.all("person").get("",c,{token:b.get("token")})},c}]),angular.module("frontend2App").controller("PersondetailCtrl",["$scope","$stateParams","$state","toastr","session","user","$uibModal","response",function(a,b,c,d,e,f,g,h){a.user=e.getCurrentUser(),h.data.id?a.person=h.data:(a.person=null,d.error("No se encontró persona asociada al código.","Error")),a.age=function(a){var b=new Date;a=a.split("T")[0].split("-");var c=a[0],d=a[1],e=a[2],f=b.getFullYear()-c,g=b.getMonth()+1-d,h=b.getDay()-e;return(g>0||0==g&&h>=0)&&f++,f},a.gender=function(a){return"M"==a?"MASCULINO":"FEMENINO"},a.createUser=function(){var b=g.open({animation:!0,templateUrl:"views/createusermodal.html",controller:"CreateusermodalCtrl",size:"md"});b.result.then(function(b){f.postUser({personId:a.person.id,profileId:b.profileId}).then(function(b){a.person=b.data,d.success("Creación de usuario hecha con exito.","Listo")},function(a){500==a.status&&d.error("Ocurrió un error. Intente de nuevo.","Error")})},function(){console.log("Modal dismissed at: "+new Date)})},a.statusColor=function(a){return a.available?"label-success":"label-warning"},a.statusText=function(a){return a.available?"habilitado":"deshabilitado"},a.userEnabled=function(){f.partialUpdate({id:a.person.user.id,available:!0}).then(function(b){a.person=b.data,d.success("Habilitación de usuario hecha con exito.","Listo")},function(a){500==a.status&&d.error("Ocurrió un error. Intente de nuevo.","Error")})},a.userDisabled=function(){f.partialUpdate({id:a.person.user.id,available:!1}).then(function(b){a.person=b.data,d.warning("Deshabilitación de usuario hecha con exito.","Listo")},function(a){500==a.status&&d.error("Ocurrió un error. Intente de nuevo.","Error")})},a.changeRole=function(){var b=g.open({animation:!0,templateUrl:"views/createusermodal.html",controller:"CreateusermodalCtrl",size:"md"});b.result.then(function(b){f.partialUpdate({id:a.person.user.id,profileId:b.profileId}).then(function(b){a.person=b.data,d.success("Cambio de rol hecho con exito.","Listo")},function(a){500==a.status&&d.error("Ocurrió un error. Intente de nuevo.","Error")})},function(){console.log("Modal dismissed at: "+new Date)})}}]),angular.module("frontend2App").controller("CreateusermodalCtrl",["$scope","$uibModalInstance",function(a,b){a.roles=[{rol:"-- Seleccionar rol --",rolId:""},{rol:"Analista",rolId:"7"},{rol:"Coordinador",rolId:"8"},{rol:"Visitador",rolId:"9"},{rol:"Administrador",rolId:"6"}],a.rol="",a.ok=function(){b.close({profileId:a.rol})},a.cancel=function(){b.dismiss("cancel")}}]),angular.module("frontend2App").controller("FilterpersonCtrl",["$scope","$state","$uibModalInstance",function(a,b,c){a.profiles=[{filter:"Todos",profileId:""},{filter:"Analista",profileId:"1"},{filter:"Coordinador",profileId:"2"},{filter:"Visitador",profileId:"3"}],a.states=[{filter:"Todos",stateId:""},{filter:"Amazonas",stateId:"1"},{filter:"Anzoátegui",stateId:"2"},{filter:"Apure",stateId:"3"},{filter:"Aragua",stateId:"4"},{filter:"Barinas",stateId:"5"},{filter:"Bolívar",stateId:"6"},{filter:"Carabobo",stateId:"7"},{filter:"Cojedes",stateId:"8"},{filter:"Delta Amacuro",stateId:"9"},{filter:"Falcón",stateId:"10"},{filter:"Distrito Capital",stateId:"11"},{filter:"Guárico",stateId:"12"},{filter:"Lara",stateId:"13"},{filter:"Mérida",stateId:"14"},{filter:"Miranda",stateId:"14"},{filter:"Monagas",stateId:"16"},{filter:"Nueva Esparta",stateId:"17"},{filter:"Portuguesa",stateId:"18"},{filter:"Sucre",stateId:"19"},{filter:"Tachira",stateId:"20"},{filter:"Trujillo",stateId:"21"},{filter:"Vargas",stateId:"22"},{filter:"Yaracuy",stateId:"23"},{filter:"Zulia",stateId:"24"}],a.state="",a.profile="",a.reset=function(){a.identityCard="",a.profile="",a.firstName="",a.lastName="",a.state=""},a.filter=function(){c.close(),b.go("main.home.personlist",{identityCard:a.identityCard,profileId:a.profile,firstName:a.firstName,lastName:a.lastName,stateId:a.state})},a.cancel=function(){c.dismiss("cancel")}}]),angular.module("frontend2App").controller("UserconfigurationCtrl",function(){this.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}),angular.module("frontend2App").run(["$templateCache",function(a){a.put("views/assignvisitormodal.html",'<div class="modal-header modal-header-primary"> <h3 class="modal-title">Asignación de Visita Clínica</h3> </div> <div class="modal-body"> <div class="container-fluid"> <div class="panel panel-primary"> <div class="panel-heading"> <h3 class="panel-title">Listado de Visitadores</h3> </div> <div class="panel-body"> <center> <nav> <ul class="pagination"> <li> <a ng-click="previousPage()" href="" aria-label="Previous"> <span aria-hidden="true">&laquo;</span> </a> </li> <li ng-class="{\'active\': selectedPage == $index}" ng-repeat="i in [].constructor(pages) track by $index"><a ng-click="pageSelected($index)" href="">{{$index + 1}}</a></li> <li> <a ng-click="nextPage()" href="" aria-label="Next"> <span aria-hidden="true">&raquo;</span> </a> </li> </ul> </nav> </center> <div class="table-responsive"> <table class="table table-hover table-condensed table-striped"> <tr> <th><center>Cédula</center></th> <th><center>Nombre</center></th> <th><center>Visitas Asignadas</center></th> <th><center>Asignar</center></th> </tr> <tr ng-repeat="visitor in visitors track by $index"> <td><center>{{visitor.person.identityCard}}</center></td> <td><center>{{visitor.person.firstName}} {{visitor.person.lastName}}</center></td> <td><center>{{visitor.assignments}}</center></td> <!--<td><center><button ng-click="assign(visitor)" type="button" class="btn btn-warning btn-xs">Asignar</button></center></td>--> <td><center><label><input type="radio" ng-model="$parent.visitor" ng-value="visitor"></label></center></td> </tr> </table> </div> <textarea class="form-control" ng-model="coment" rows="1" id="comment" placeholder="Ingrese observación aquí. (Opcional)"></textarea> </div> </div> </div> </div> <div class="modal-footer"> <button class="btn btn-primary" type="button" ng-click="ok()" ng-disabled="canAssign()">Asignar</button> <button class="btn btn-warning" type="button" ng-click="cancel()">Cancelar</button> </div>'),a.put("views/attached.html",'<div class="container-fluid"> <div class="row"> <div class="col-sm-6"> <label class="text-primary">Imágenes cargadas sobre el presupuesto</label> <ng-image-gallery images="images1" methods="methods1"></ng-image-gallery> <!--<ul class="list-group">\n                <li ng-repeat="file in budgetPaths track by $index" class="list-group-item">\n                    {{file.path}}\n                    <span class="pull-right">\n                        <button class="btn btn-xs btn-danger" ng-click="viewImage(file.path)">\n                            <span class="glyphicon glyphicon-eye-open"></span>\n                        </button>\n                    </span>\n                </li>\n            </ul>--> </div> <div class="col-sm-6"> <label class="text-success">Imágenes cargadas sobre la encuesta</label> <ng-image-gallery images="images2" methods="methods2"></ng-image-gallery> <!--<ul class="list-group">\n                <li ng-repeat="file in surveyPaths track by $index" class="list-group-item">\n                    {{file.path}}\n                    <span class="pull-right">\n                        <button class="btn btn-xs btn-danger" ng-click="viewImage(file.path)">\n                            <span class="glyphicon glyphicon-eye-open"></span>\n                        </button>\n                    </span>\n                </li>\n            </ul>--> </div> </div> <div ng-if="user.userProfile == \'visitador\'"> <br><br><br> <div class="row" ng-if="!disabled()"> <div class="col-sm-6"> <div class="form-group"> <button type="button" class="btn btn-primary btn-xs" ng-click="budgetUpload()"><span class="glyphicon glyphicon-plus-sign"></span> <strong>Cargar</strong></button> <label class="text-primary">imagen del presupuesto con cambios</label> <ul class="list-group"> <li ng-repeat="file in budgetFiles track by $index" class="list-group-item"> {{file.name}} <span class="pull-right"> <button class="btn btn-xs btn-danger" ng-click="removeBudget($index)"> <span class="glyphicon glyphicon-remove"></span> </button> </span> </li> </ul> </div> </div> <div class="col-sm-6"> <div class="form-group"> <button type="button" class="btn btn-success btn-xs" ng-click="surveyUpload()"><span class="glyphicon glyphicon-plus-sign"></span> <strong>Cargar</strong></button> <label class="text-success">imagen de la encuesta realizada</label> <ul class="list-group"> <li ng-repeat="file in surveyFiles track by $index" class="list-group-item"> {{file.name}} <span class="pull-right"> <button class="btn btn-xs btn-danger" ng-click="removeSurvey($index)"> <span class="glyphicon glyphicon-remove"></span> </button> </span> </li> </ul> </div> </div> </div> <br><br><br> <div class="row" ng-if="!disabled()"> <center> <button ng-disabled="loadable()" class="btn btn-md btn-info" ng-click="loadData()"> <span class="glyphicon glyphicon-open"></span> Subir imágenes </button> <p class="help-block">Las nuevas imágenes sustituirán las anteriores</p> </center> </div> </div> </div> <input id="upload1" type="file" accept="image/*" onchange="angular.element(this).scope().budgetLoaded(this.files[0])" class="hide"> <input id="upload2" type="file" accept="image/*" onchange="angular.element(this).scope().surveyLoaded(this.files[0])" class="hide">'),a.put("views/budget.html",'<div class="panel panel-primary"> <div class="panel-heading"> <h2>Presupuesto</h2> </div> <div class="panel-body"> <!-- Nav tabs --> <ul class="nav nav-tabs"> <li ui-sref-active="active"><a ui-sref=".originalbudget"><i class="glyphicon glyphicon-info-sign"></i> Presupuesto Original</a></li> <li ui-sref-active="active"><a ui-sref=".currentbudget"><i class="glyphicon glyphicon-list-alt"></i> Presupuesto Modificado</a></li> </ul> <!-- Tab panes --> <div class="tab-content"> <br> <div ui-view></div> </div> <!--<div class="col-sm-6">\n			\n			<div class="table-responsive">\n	            <table class="table table-hover table-condensed">\n\n	                <tr>\n	                	<th><center><strong>No.</strong></center></th>\n	                    <th><center>Concepto</center></th>\n	                    <th><center>Descripción</center></th>\n	                    <th><center>Cantidad</center></th>\n	                    <th><center>Costo Bs (unitario)</center></th>\n	                    <th><center>Editar</center></th>\n	                </tr>\n\n	                <tr ng-repeat="item in budget.item track by $index">\n	                	<td><center><strong>{{$index + 1}}</strong></center></td>\n	                    <td><center>{{item.concept}}</center></td>\n	                    <td><center>{{item.description}}</center></td>\n	                    <td><center>{{item.quantity}}</center></td>\n	                    <td><center>{{item.cost}}</center></td>\n	                   	<td><center>Editar</center></td>\n	                </tr>\n\n	                <tr>\n				        <td></td>\n				        <td></td>\n				        <td></td>\n				        <td></td>\n				        <th><center>Total: {{cost}} </center></th>\n				    </tr>\n	                   \n	            </table>\n	        </div>\n\n		</div>\n\n		<div class="col-sm-6">\n			\n			<div class="table-responsive">\n	            <table class="table table-hover table-condensed">\n\n	                <tr>\n	                	<td><center><strong>No.</strong></center></td>\n	                    <th><center>Concepto</center></th>\n	                    <th><center>Descripción</center></th>\n	                    <th><center>Cantidad</center></th>\n	                    <th><center>Costo Bs (unitario)</center></th>\n	                    <th ng-if="user.userProfile == \'visitador\' && canEdit()"><center>Acción</center></th>\n	                </tr>\n\n	                <tr ng-repeat="item in budget.item track by $index">\n	                	<td><center><strong>{{$index + 1}}</strong></center></td>\n	                    <td><center>{{item.concept}}</center></td>\n	                    <td><center>{{item.description}}</center></td>\n	                    <td><center>{{item.quantity}}</center></td>\n	                    <td><center>{{item.cost}}</center></td>\n	                    <td ng-if="user.userProfile == \'visitador\' && canEdit()">\n	                       	<center>\n	                        	<button ng-click="edit(item, $index)" type="button" class="btn btn-warning btn-xs">Editar</button>\n	                        </center>\n	                    </td>\n	                </tr>\n\n	                <tr>\n				        <td></td>\n				        <td></td>\n				        <td></td>\n				        <td></td>\n				        <td></td>\n				        <th><center>Total: {{cost}} </center></th>\n				    </tr>\n	                   \n	            </table>\n	        </div>\n\n		</div>--> </div> </div>'),a.put("views/comment.html",'<div class="modal-header modal-header-primary"> <h3 class="modal-title">Observación</h3> </div> <div class="modal-body"> <div class="container-fluid"> <form name="form" class="form-horizontal" ng-submit="edited(form.$valid)"> <div class="form-group"> <textarea class="form-control" ng-model="coment" rows="5" id="comment" placeholder="Ingrese observación aquí. (Opcional)"></textarea> </div> </form> </div> </div> <div class="modal-footer"> <button class="btn btn-primary" type="button" ng-click="ok()">OK</button> <button class="btn btn-warning" type="button" ng-click="cancel()">Cancelar</button> </div>'),a.put("views/createusermodal.html",'<div class="modal-header modal-header-primary"> <h3 class="modal-title">Suministrar la siguiente información</h3> </div> <div class="modal-body"> <div class="container-fluid"> <form class="form-horizontal"> <div class="form-group"> <label class="col-sm-4 control-label">Rol de Usuario:</label> <div class="col-sm-6"> <select class="selectpicker form-control" ng-model="rol" ng-options="rol.rolId as rol.rol for rol in roles"></select> </div> </div> </form> </div> </div> <div class="modal-footer"> <button ng-disabled="rol == \'\'" class="btn btn-primary" type="button" ng-click="ok()">OK</button> <button class="btn btn-warning" type="button" ng-click="cancel()">Cancelar</button> </div>'),a.put("views/currentbudget.html",'<div class="table-responsive"> <table class="table table-hover table-condensed table-striped"> <tr> <td><center><strong>No.</strong></center></td> <th><center>Concepto</center></th> <th><center>Descripción</center></th> <th><center>Cantidad</center></th> <th><center>Costo Bs (unitario)</center></th> <th ng-if="user.userProfile == \'visitador\' && canEdit()"><center>Acción</center></th> </tr> <tr ng-repeat="item in currentBudget.item track by $index" ng-class="{\'danger\': edited($index)}"> <td><center><strong>{{$index + 1}}</strong></center></td> <td><center>{{item.concept}}</center></td> <td><center>{{item.description}}</center></td> <td><center>{{item.quantity}}</center></td> <td><center>{{formattedCost(item.cost)}}</center></td> <td ng-if="user.userProfile == \'visitador\' && canEdit()"> <center> <button ng-click="edit(item, $index)" type="button" class="btn btn-warning btn-xs">Editar</button> </center> </td> </tr> <tr> <td></td> <td></td> <td></td> <td></td> <th><center>Total: {{currentCost}} </center></th> <td ng-if="user.userProfile == \'visitador\' && canEdit()"></td> </tr> </table> </div> <div class="row" ng-if="user.userProfile == \'visitador\' && canEdit()"> <center> <button class="btn btn-md btn-info" ng-click="loadBudget()"> <span class="glyphicon glyphicon-open"></span> Cargar modificaciones </button> <p class="help-block">Las nuevas modificaciones sustituirán las anteriores</p> </center> </div>'),a.put("views/decision.html",'<div class="row"> <div class="col-sm-8"> <div class="alert" ng-class="infoClass()" role="alert"> <center> {{info()}} <a ng-if="user.userProfile == \'visitador\' && showButton()" ng-click="finish()" href="" class="alert-link"><strong>Finalizar</strong></a> <a ng-if="user.userProfile == \'coordinador\' && canReview()" ng-click="review()" href="" class="alert-link"><strong>Revisar</strong></a> <a ng-if="user.userProfile == \'coordinador\' && canReview()">|</a> <a ng-if="user.userProfile == \'coordinador\' && canReview()" ng-click="authorize()" href="" class="alert-link"><strong>Autorizar</strong></a> </center> </div> <!--<div ng-if="user.userProfile == \'visitador\' && showButton()">\n            <center>\n                <button class="btn btn-md btn-info" ng-click="finish()">\n                    <span class="glyphicon glyphicon-open"></span> Finalizar\n                </button>\n            </center>\n        </div>\n\n        <div ng-if="user.userProfile == \'coordinador\' && canReview()">\n            <center>\n                <button class="btn btn-md btn-info" ng-click="review()">\n                    <span class="glyphicon glyphicon-open"></span> A revisión\n                </button>\n                <button class="btn btn-md btn-info" ng-click="authorize()">\n                    <span class="glyphicon glyphicon-open"></span> Autorizar\n                </button>\n            </center>\n        </div>--> </div> <div class="col-sm-4"> <div class="panel panel-primary"> <div class="panel-heading">Historial de observaciones:</div> <div id="box" class="panel-body" style="overflow-y:scroll; overflow-x:hidden; height:300px"> <div ng-repeat="comment in comments"> <div class="row"> <div class="col-sm-9"> <strong>{{comment.commenter.person.firstName}} {{comment.commenter.person.lastName}} ({{comment.commenter.person.profile.profile}}):</strong> <p class="text-justify">{{comment.comment}}</p> </div> <div class="col-sm-3"> <h6 class="text-right"><span class="label label-primary">{{date(comment.date)}}</span></h6> <!--<h6 class="text-right">{{hour(comment.date)}}</h6>--> </div> </div> </div> </div> </div> </div> </div>'),
a.put("views/edititemmodal.html",'<div class="modal-header modal-header-primary"> <h3 class="modal-title">Cambio en el Presupuesto</h3> </div> <div class="modal-body"> <div class="container-fluid"> <div class="panel panel-primary"> <div class="panel-heading"> <h3 class="panel-title">Información del Gasto</h3> </div> <br> <div ng-if="historical.length"> <center><a href="" ng-click="toggleHistory()"><i class="glyphicon glyphicon-dashboard"></i> {{historyText}}</a></center> <br> </div> <div ng-if="history" class="table-responsive container-fluid"> <table class="table table-hover table-condensed"> <tr> <th><center>Descripción</center></th> <th><center>Concepto</center></th> <th><center>Costo</center></th> <th><center>Cantidad</center></th> </tr> <tr ng-repeat="item in historical"> <td><center>{{item.concept}}</center></td> <td><center>{{item.description}}</center></td> <td><center>{{item.quantity}}</center></td> <td><center>{{item.cost}}</center></td> </tr> </table> </div> <br> <form name="form" class="form-horizontal" ng-submit="edited(form.$valid)"> <div class="form-group"> <label for="inputEmail3" class="col-sm-2 control-label">Descripción:</label> <div class="col-sm-10"> <input type="text" class="form-control" id="inputEmail3" ng-model="it.description" required> </div> </div> <div class="form-group"> <label for="inputPassword3" class="col-sm-2 control-label">Concepto:</label> <div class="col-sm-10"> <input type="text" class="form-control" id="inputPassword3" ng-model="it.concept" required> </div> </div> <div class="form-group"> <label for="inputPassword3" class="col-sm-2 control-label">Costo:</label> <div class="col-sm-3"> <input type="number" min="0" step="0.01" class="form-control" ng-model="it.cost" required> </div> </div> <div class="form-group"> <label for="inputPassword3" class="col-sm-2 control-label">Cantidad:</label> <div class="col-sm-2"> <input type="number" min="0" class="form-control" ng-model="it.quantity" required> </div> </div> <div class="text-right"> <button class="btn btn-primary" type="submit">OK</button> <button class="btn btn-warning" type="button" ng-click="cancel()">Cancelar</button> </div> </form> </div> </div> </div> <!--<div class="modal-footer">\n    <button class="btn btn-primary" type="button" ng-click="edited()">OK</button>\n    <button class="btn btn-warning" type="button" ng-click="cancel()">Cancelar</button>\n</div>-->'),a.put("views/filterguarantee.html",'<div class="modal-header modal-header-primary"> <h3 class="modal-title">Búsqueda de Carta Aval</h3> </div> <div class="modal-body"> <div class="container-fluid"> <form name="form" class="form-horizontal" ng-submit="edited(form.$valid)"> <div class="form-group"> <label class="col-sm-6 control-label">Estatus:</label> <div class="col-sm-4"> <select class="selectpicker form-control" ng-model="status" ng-options="filter.statusId as filter.filter for filter in filters"></select> </div> </div> <div class="form-group"> <label class="col-sm-6 control-label">Código Carta Aval:</label> <div class="col-sm-3"> <input type="text" class="form-control" ng-model="guaranteeId"> </div> </div> <div class="form-group"> <label class="col-sm-6 control-label">Póliza Asociada:</label> <div class="col-sm-3"> <input type="text" class="form-control" ng-model="policyId"> </div> </div> <div class="form-group"> <label class="col-sm-6 control-label">Nombre del Beneficiario:</label> <div class="col-sm-3"> <input type="text" class="form-control" ng-model="firstName"> </div> </div> <div class="form-group"> <label class="col-sm-6 control-label">Apellido del Beneficiario:</label> <div class="col-sm-3"> <input type="text" class="form-control" ng-model="lastName"> </div> </div> <div class="form-group"> <label class="col-sm-6 control-label">Cédula del Beneficiario:</label> <div class="col-sm-3"> <input type="text" class="form-control" ng-model="BidentityCard"> </div> </div> <!--<div class="form-group">\n				<label class="col-sm-6 control-label">Fecha emisión (desde):</label>\n				<div class="col-sm-3 input-group">\n					<input type="text" class="form-control" uib-datepicker-popup="{{format}}" ng-model="$root.dt1" is-open="popup1.opened" datepicker-options="dateOptions" readonly="true" close-text="Cerrar" clear-text="Limpiar" current-text="Hoy" alt-input-formats="altInputFormats" datepicker-options="dateOptions"/>\n		          	<span class="input-group-btn">\n		            	<button type="button" class="btn btn-default" ng-click="open1()"><i class="glyphicon glyphicon-calendar"></i></button>\n		          	</span>\n				</div>\n			</div>\n			<div class="form-group">\n				<label class="col-sm-6 control-label">Fecha caducidad (hasta):</label>\n				<div class="col-sm-3 input-group">\n					<input type="text" class="form-control" uib-datepicker-popup="{{format}}" ng-model="$root.dt2" is-open="popup2.opened" datepicker-options="dateOptions" readonly="true" close-text="Cerrar" clear-text="Limpiar" current-text="Hoy" alt-input-formats="altInputFormats" datepicker-options="dateOptions"/>\n		          	<span class="input-group-btn">\n		            	<button type="button" class="btn btn-default" ng-click="open2()"><i class="glyphicon glyphicon-calendar"></i></button>\n		          	</span>\n				</div>\n			</div>--> <div class="form-group"> <button ng-click="reset()" type="button" class="btn btn-info btn-xs pull-right">Limpiar campos</button> </div> </form> <!-- \n			<form name="form" class="form-inline" ng-submit="edited(form.$valid)">\n		    <div class="form-group">\n		    	<div class="input-group">\n			    	<span class="input-group-addon">Estatus</span>\n			    	<select class="selectpicker form-control" ng-model="selectedFilter" ng-options="filter.statusId as filter.filter for filter in filters" ng-change="selectChanged()"></select>\n				</div>\n			</div>\n		</form>\n\n		--> </div> </div> <div class="modal-footer"> <button class="btn btn-primary" type="button" ng-click="filter()">OK</button> <button class="btn btn-warning" type="button" ng-click="cancel()">Cancelar</button> </div>'),a.put("views/filtermodal.html",'<div class="modal-header modal-header-primary"> <h3 class="modal-title">Búsqueda de Solicitudes de Visita</h3> </div> <div class="modal-body"> <div class="container-fluid"> <form name="form" class="form-horizontal" ng-submit="edited(form.$valid)"> <div class="form-group"> <label class="col-sm-6 control-label">Estatus:</label> <div class="col-sm-4"> <select class="selectpicker form-control" ng-model="selectedFilter" ng-options="filter.statusId as filter.filter for filter in filters"></select> </div> </div> <div class="form-group"> <label class="col-sm-6 control-label">Código Visita:</label> <div class="col-sm-3"> <input type="text" class="form-control" ng-model="requestId"> </div> </div> <div class="form-group"> <label class="col-sm-6 control-label">Código Carta Aval:</label> <div class="col-sm-3"> <input type="text" class="form-control" ng-model="guaranteeId"> </div> </div> <div class="form-group"> <label class="col-sm-6 control-label">Fecha Solicitud (desde):</label> <div class="col-sm-3 input-group"> <input type="text" class="form-control" uib-datepicker-popup="{{format}}" ng-model="dt1" is-open="popup1.opened" datepicker-options="dateOptions" readonly close-text="Cerrar" clear-text="Limpiar" current-text="Hoy" alt-input-formats="altInputFormats" datepicker-options="dateOptions"> <span class="input-group-btn"> <button type="button" class="btn btn-default" ng-click="open1()"><i class="glyphicon glyphicon-calendar"></i></button> </span> </div> </div> <div class="form-group"> <label class="col-sm-6 control-label">Fecha Solicitud (hasta):</label> <div class="col-sm-3 input-group"> <input type="text" class="form-control" uib-datepicker-popup="{{format}}" ng-model="dt2" is-open="popup2.opened" datepicker-options="dateOptions" readonly close-text="Cerrar" clear-text="Limpiar" current-text="Hoy" alt-input-formats="altInputFormats" datepicker-options="dateOptions"> <span class="input-group-btn"> <button type="button" class="btn btn-default" ng-click="open2()"><i class="glyphicon glyphicon-calendar"></i></button> </span> </div> </div> <div class="form-group"> <button ng-click="reset()" type="button" class="btn btn-info btn-xs pull-right">Limpiar campos</button> </div> </form> <!-- \n			<form name="form" class="form-inline" ng-submit="edited(form.$valid)">\n		    <div class="form-group">\n		    	<div class="input-group">\n			    	<span class="input-group-addon">Estatus</span>\n			    	<select class="selectpicker form-control" ng-model="selectedFilter" ng-options="filter.statusId as filter.filter for filter in filters" ng-change="selectChanged()"></select>\n				</div>\n			</div>\n		</form>\n\n		--> </div> </div> <div class="modal-footer"> <button class="btn btn-primary" type="button" ng-click="filter()">OK</button> <button class="btn btn-warning" type="button" ng-click="cancel()">Cancelar</button> </div>'),a.put("views/filterperson.html",'<div class="modal-header modal-header-primary"> <h3 class="modal-title">Búsqueda de personas</h3> </div> <div class="modal-body"> <div class="container-fluid"> <form name="form" class="form-horizontal" ng-submit="edited(form.$valid)"> <div class="form-group"> <label class="col-sm-4 control-label">Cédula:</label> <div class="col-sm-8"> <input type="text" class="form-control" ng-model="identityCard"> </div> </div> <div class="form-group"> <label class="col-sm-4 control-label">Nombre:</label> <div class="col-sm-8"> <input type="text" class="form-control" ng-model="firstName"> </div> </div> <div class="form-group"> <label class="col-sm-4 control-label">Apellido:</label> <div class="col-sm-8"> <input type="text" class="form-control" ng-model="lastName"> </div> </div> <div class="form-group"> <label class="col-sm-4 control-label">Cargo:</label> <div class="col-sm-8"> <select class="selectpicker form-control" ng-model="profile" ng-options="filter.profileId as filter.filter for filter in profiles"></select> </div> </div> <div class="form-group"> <label class="col-sm-4 control-label">Ubicación:</label> <div class="col-sm-8"> <select class="selectpicker form-control" ng-model="state" ng-options="filter.stateId as filter.filter for filter in states"></select> </div> </div> <div class="form-group"> <center><button ng-click="reset()" type="button" class="btn btn-info btn-xs">Limpiar campos</button></center> </div> </form> </div> </div> <div class="modal-footer"> <button class="btn btn-primary" type="button" ng-click="filter()">OK</button> <button class="btn btn-warning" type="button" ng-click="cancel()">Cancelar</button> </div>'),a.put("views/guaranteeletterdetail.html",'<div ng-if="guaranteeLetter"> <a><strong><i class="glyphicon glyphicon-dashboard"></i> Detalles de la Carta Aval de Código: {{guaranteeLetter.id}}</strong></a> </div> <div ng-if="!guaranteeLetter"> <a><strong><i class="glyphicon glyphicon-dashboard"></i> No se encontró Carta Aval asociada al Código.</strong></a> </div> <hr> <div ng-if="guaranteeLetter"> <div class="container-fluid"> <div class="panel panel-primary"> <div class="panel-heading"> <h3 class="panel-title">Datos de Carta Aval</h3> </div> <br> <div class="container-fluid"> <form class="form-horizontal"> <div class="form-group"> <label class="col-sm-1 control-label">Estatus:</label> <div class="col-sm-1"> <!--<a class="form-control-static btn btn-md" ng-class="status(guaranteeLetter.status.status)">{{guaranteeLetter.status.status}}</a>--> <h5><span class="label" ng-class="statusColor2(guaranteeLetter)">{{statusText2(guaranteeLetter)}}</span></h5> <!--<p class="form-control-static img-rounded" ng-class="status(guaranteeLetter.status.status)"><strong>{{guaranteeLetter.status.status}}</strong></a>--> </div> <label class="col-sm-2 control-label">Código Carta Aval:</label> <div class="col-sm-1"> <p class="form-control-static">{{guaranteeLetter.id}}</p> </div> <label class="col-sm-1 control-label">Expide:</label> <div class="col-sm-1"> <p class="form-control-static">{{date(guaranteeLetter.startDate)}}</p> </div> <label class="col-sm-1 control-label">Vence:</label> <div class="col-sm-1"> <p class="form-control-static">{{date(guaranteeLetter.endDate)}}</p> </div> <!--<label class="col-sm-2 control-label">Visita asociada #:</label>\n            <div class="col-sm-2">\n              <div ng-if="guaranteeLetter.request.id">\n                <p class="form-control-static">{{guaranteeLetter.request.id}}</p>\n              </div>\n              <div ng-if="!guaranteeLetter.request.id">\n                <p class="form-control-static">No posee</p>\n              </div>\n            </div>--> <div ng-if="canRequest()" class="col-sm-offset-1 col-sm-2"> <button ng-click="postRequest()" type="button" class="btn btn-danger btn-md">Solicitar Visita</button> </div> </div> <!--</form>--> <center> <ul class="list-inline"> <li><button ng-click="downloadBudget()" type="button" class="btn btn-info btn-xs">Descargar Presupuesto</button></li> <li><button ng-click="downloadGuarantee()" type="button" class="btn btn-info btn-xs">Descargar Carta Aval</button></li> </ul> </center> <div ng-if="history"> <div class="panel panel-primary"> <div class="panel-heading">Historial de visitas</div> <div class="panel-body"> <div class="table-responsive"> <table class="table table-hover table-condensed"> <tr> <th><center>Código de Visita</center></th> <th><center>Fecha Solicitud</center></th> <th><center>Estatus</center></th> <th><center>Acción</center></th> </tr> <tr ng-repeat="request in history"> <td><center>{{request.id}}</center></td> <td><center>{{date(request.startDate)}}</center></td> <td><center><span class="label" ng-class="status2(request.status.status)">{{statusText(request.status.status)}}</span></center></td> <td> <center> <button ng-click="detail(request.id)" type="button" class="btn btn-primary btn-xs">Ver</button> </center> </td> </tr> </table> </div> </div> </div> </div> <div class="panel panel-primary"> <div class="panel-heading"> <!--<h3 class="panel-title">Datos de la institución prestadora de servicio</h3>--> Datos de la Institución Prestadora de Servicio </div> <div class="panel-body"> <!--<form class="form-horizontal">--> <div class="form-group"> <label class="col-sm-2 control-label">Nombre:</label> <div class="col-sm-10"> <p class="form-control-static">{{guaranteeLetter.budget.affiliated.name}}</p> </div> <label class="col-sm-2 control-label">Estado:</label> <div class="col-sm-2"> <p class="form-control-static">{{guaranteeLetter.budget.affiliated.state.stateName}}</p> </div> <label class="col-sm-2 control-label">Teléfono:</label> <div class="col-sm-2"> <p class="form-control-static">{{guaranteeLetter.budget.affiliated.phoneNumber}}</p> </div> <label class="col-sm-2 control-label">RIF:</label> <div class="col-sm-2"> <p class="form-control-static">{{guaranteeLetter.budget.affiliated.rif}}</p> </div> <div ng-if="request.guaranteeLetter.budget.affiliated.portal"> <label class="col-sm-2 control-label">Portal:</label> <div class="col-sm-10"> <p class="form-control-static">{{guaranteeLetter.budget.affiliated.portal}}</p> </div> </div> <label class="col-sm-2 control-label">Dirección:</label> <div class="col-sm-10"> <p class="form-control-static">{{guaranteeLetter.budget.affiliated.address}}</p> </div> </div> <!--</form>--> </div> </div> <div class="panel panel-primary"> <div class="panel-heading"> <!--<h3 class="panel-title">Datos del beneficiario</h3>--> Datos del Beneficiario </div> <div class="panel-body"> <div class="form-group"> <label class="col-sm-3 col-md-2 control-label">Nombre:</label> <div class="col-sm-3 col-md-2"> <p class="form-control-static">{{guaranteeLetter.beneficiary.firstName}} {{guaranteeLetter.beneficiary.lastName}}</p> </div> <label class="col-sm-3 col-md-2 control-label">Cédula:</label> <div class="col-sm-3 col-md-2"> <p class="form-control-static">{{guaranteeLetter.beneficiary.identityCard}}</p> </div> <label class="col-sm-3 col-md-2 control-label">Género:</label> <div class="col-sm-3 col-md-2"> <p class="form-control-static">{{gender(guaranteeLetter.beneficiary.gender)}}</p> </div> <label class="col-sm-3 col-md-2 control-label">Edad:</label> <div class="col-sm-3 col-md-2"> <p class="form-control-static">{{age(guaranteeLetter.beneficiary.birthDate)}}</p> </div> <label class="col-sm-3 col-md-2 control-label">Teléfono:</label> <div class="col-sm-3 col-md-2"> <p class="form-control-static">{{guaranteeLetter.beneficiary.phoneNumber}}</p> </div> <label class="col-sm-2 col-md-1 control-label">Email:</label> <div class="col-sm-4 col-md-3"> <p class="form-control-static">{{guaranteeLetter.beneficiary.email}}</p> </div> <label class="col-sm-3 col-md-2 control-label">Dirección:</label> <div class="col-sm-9 col-md-10"> <p class="form-control-static">{{guaranteeLetter.beneficiary.address}}</p> </div> </div> </div> </div> </form> <!--<div ng-if="history">\n          <div class="panel panel-primary">\n            <div class="panel-heading">Historial de visitas</div>\n            <div class="panel-body">\n              \n              <div class="table-responsive">\n                <table class="table table-hover table-condensed">\n                  <tr>\n                    <th><center>Código de visita</center></th>\n                    <th><center>Fecha solicitud</center></th>\n                    <th><center>Estatus</center></th>\n                    <th><center>Acción</center></th>\n                  </tr>\n                  <tr ng-repeat="request in history">\n                    <td><center>{{request.id}}</center></td>\n                    <td><center>{{date(request.startDate)}}</center></td>\n                    <td><center><span class="label" ng-class="status2(request.status.status)">{{statusText(request.status.status)}}</span></center></td>\n                    <td>\n                      <center>\n                        <button ng-click="detail(request.id)" type="button" class="btn btn-primary btn-xs">Ver</button>\n                      </center>\n                    </td>\n                  </tr>\n                </table>\n              </div>\n\n            </div>\n          </div>\n        </div>--> </div> </div> <!--<div class="panel panel-primary">\n      <div class="panel-heading">\n        <h3 class="panel-title">Póliza asociada</h3>\n      </div>\n      <br>\n      <div class="container-fluid">\n        <form class="form-horizontal">\n          <div class="form-group">\n          <label class="col-sm-2 control-label">Código carta aval:</label>\n            <div class="col-sm-1">\n              <p class="form-control-static">{{guaranteeLetter.policy.id}}</p>\n            </div>\n            <label class="col-sm-2 control-label">Cobertura desde:</label>\n            <div class="col-sm-2">\n              <p class="form-control-static">{{date(guaranteeLetter.policy.startDate)}}</p>\n            </div>\n            <label class="col-sm-1 control-label">hasta:</label>\n            <div class="col-sm-1">\n              <p class="form-control-static">{{date(guaranteeLetter.policy.endDate)}}</p>\n            </div>\n            <label class="col-sm-1 control-label">Prima</label>\n            <div class="col-sm-2">\n              <p class="form-control-static">Bs. {{guaranteeLetter.policy.cost}}</p>\n            </div>\n          </div>\n          <div class="panel panel-primary">\n            <div class="panel-heading">\n              \n              Datos del tomador\n            </div>\n            \n            <div class="panel-body">\n              <div class="form-group">\n                <label class="col-sm-3 col-md-2 control-label">Nombre:</label>\n                <div class="col-sm-3 col-md-2">\n                  <p class="form-control-static">{{guaranteeLetter.policy.holder.firstName}} {{guaranteeLetter.policy.holder.lastName}}</p>\n                </div>\n                <label class="col-sm-3 col-md-2 control-label">Cédula:</label>\n                <div class="col-sm-3 col-md-2">\n                  <p class="form-control-static">{{guaranteeLetter.policy.holder.identityCard}}</p>\n                </div>\n                <label class="col-sm-3 col-md-2 control-label">Género:</label>\n                <div class="col-sm-3 col-md-2">\n                  <p class="form-control-static">{{gender(guaranteeLetter.policy.holder.gender)}}</p>\n                </div>\n                <label class="col-sm-3 col-md-2 control-label">Edad:</label>\n                <div class="col-sm-3 col-md-2">\n                  <p class="form-control-static">{{age(guaranteeLetter.policy.holder.birthDate)}}</p>\n                </div>\n                <label class="col-sm-3 col-md-2 control-label">Teléfono:</label>\n                <div class="col-sm-3 col-md-2">\n                  <p class="form-control-static">{{guaranteeLetter.policy.holder.phoneNumber}}</p>\n                </div>\n                <label class="col-sm-2 col-md-1 control-label">Email:</label>\n                <div class="col-sm-4 col-md-3">\n                  <p class="form-control-static">{{guaranteeLetter.policy.holder.email}}</p>\n                </div>\n                <label class="col-sm-3 col-md-2 control-label">Dirección:</label>\n                <div class="col-sm-9 col-md-10">\n                  <p class="form-control-static">{{guaranteeLetter.policy.holder.address}}</p>\n                </div>\n              </div>\n            </div>\n          </div>\n          <div class="panel panel-primary">\n            <div class="panel-heading">\n            \n              Datos del asegurado\n            </div>\n            <div class="panel-body">\n              <div class="form-group">\n                <label class="col-sm-3 col-md-2 control-label">Nombre:</label>\n                <div class="col-sm-3 col-md-2">\n                  <p class="form-control-static">{{guaranteeLetter.policy.owner.firstName}} {{guaranteeLetter.policy.holder.lastName}}</p>\n                </div>\n                <label class="col-sm-3 col-md-2 control-label">Cédula:</label>\n                <div class="col-sm-3 col-md-2">\n                  <p class="form-control-static">{{guaranteeLetter.policy.owner.identityCard}}</p>\n                </div>\n                <label class="col-sm-3 col-md-2 control-label">Género:</label>\n                <div class="col-sm-3 col-md-2">\n                  <p class="form-control-static">{{gender(guaranteeLetter.policy.owner.gender)}}</p>\n                </div>\n                <label class="col-sm-3 col-md-2 control-label">Edad:</label>\n                <div class="col-sm-3 col-md-2">\n                  <p class="form-control-static">{{age(guaranteeLetter.policy.owner.birthDate)}}</p>\n                </div>\n                <label class="col-sm-3 col-md-2 control-label">Teléfono:</label>\n                <div class="col-sm-3 col-md-2">\n                  <p class="form-control-static">{{guaranteeLetter.policy.owner.phoneNumber}}</p>\n                </div>\n                <label class="col-sm-2 col-md-1 control-label">Email:</label>\n                <div class="col-sm-4 col-md-3">\n                  <p class="form-control-static">{{guaranteeLetter.policy.owner.email}}</p>\n                </div>\n                <label class="col-sm-3 col-md-2 control-label">Dirección:</label>\n                <div class="col-sm-9 col-md-10">\n                  <p class="form-control-static">{{guaranteeLetter.policy.holder.address}}</p>\n                </div>\n              </div>\n            </div>\n          </div>\n        </form>\n      </div>\n    </div>--> </div> </div>'),a.put("views/guaranteelist.html",'<!--<a><strong><i class="glyphicon glyphicon-dashboard"></i> Solicitudes</strong></a>--><!--<a><strong><i class="glyphicon glyphicon-search"></i> Resultados encontrados: {{guarantees.length}}</strong></a>--> <a href="" ng-click="filter()"><strong><i class="glyphicon glyphicon-search"></i> Búsqueda de Carta Aval</strong></a> <hr> <div class="panel panel-primary"> <div class="panel-heading"> <h2>Cartas Avales</h2> </div> <div class="panel-body"> <center> <nav> <ul class="pagination"> <li> <a ng-click="previousPage()" href="" aria-label="Previous"> <span aria-hidden="true">&laquo;</span> </a> </li> <li ng-class="{\'active\': selectedPage == $index}" ng-repeat="i in [].constructor(pages) track by $index"><a ng-click="pageSelected($index)" href="">{{$index + 1}}</a></li> <li> <a ng-click="nextPage()" href="" aria-label="Next"> <span aria-hidden="true">&raquo;</span> </a> </li> </ul> </nav> </center> <br> <div> <table class="table table-hover table-condensed table-striped"> <tr> <th><center>Código Carta Aval</center></th> <th><center>Estatus</center></th> <th><center>Expide</center></th> <th><center>Vence</center></th> <th><center>CI Beneficiario</center></th> <th><center>Nombre Beneficiario</center></th> <th><center>Acciones</center></th> </tr> <tr ng-repeat="guarantee in guarantees"> <td><center>{{guarantee.id}}</center></td> <td><center><span class="label" ng-class="statusColor(guarantee)">{{statusText(guarantee)}}</span></center></td> <td><center>{{date(guarantee.startDate)}}</center></td> <td><center>{{date(guarantee.endDate)}}</center></td> <td><center>{{guarantee.beneficiary.identityCard}}</center></td> <td> <center> {{guarantee.beneficiary.firstName}} {{guarantee.beneficiary.lastName}} </center> </td> <td> <!--<center>\n	                        		<button ng-click="detail(guarantee.id)" type="button" class="btn btn-primary btn-xs">Ver</button>\n	                        		<button ng-click="detail(guarantee.id)" type="button" class="btn btn-danger btn-xs">Solicitar Visita</button>\n	                        	</center>--> <center> <div class="dropdown"> <button class="btn btn-primary dropdown-toggle btn-xs" type="button" data-toggle="dropdown">Acción <span class="caret"></span></button> <ul class="dropdown-menu dropdown-menu-right"> <li><a href="" ng-click="detail(guarantee.id)"><i class="glyphicon glyphicon-eye-open"></i> Ver</a></li> <li ng-if="canRequest(guarantee)"><a href="" ng-click="postRequest(guarantee.id)"><i class="glyphicon glyphicon-dashboard"></i> Solicitar Visita</a></li> </ul> </div> </center> </td> </tr> </table> <!--<br><br><br>--> </div> </div> </div>'),a.put("views/header.html",'<!-- header --> <div id="top-nav" class="navbar navbar-inverse navbar-static-top"> <div class="container-fluid"> <div class="navbar-header"> <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse"> <span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span> </button> <a class="navbar-brand" href="#">VisitadorClínico</a> <!--<form class="navbar-form navbar-left" role="search">\n                <div class="form-group">\n                    <input ng-model="code" type="text" class="form-control" placeholder={{placeholder}} required>\n                </div>\n                <button ng-if="user.userProfile == \'analista\'" ng-click="filter()" type="button" class="btn btn-link"><i class="glyphicon glyphicon-search"></i><strong> Búsqueda de carta aval</strong></button>\n            </form>--> </div> <div class="hidden-xs hidden-sm" style="float: right; display: flex"> <div style="padding-top: 15px; padding-right: 15px"> <p style="color: white">Ubicación: {{user.state}}</p> </div> <div class="navbar-collapse collapse"> <ul class="nav navbar-nav navbar-right"> <li class="dropdown"> <a class="dropdown-toggle" role="button" data-toggle="dropdown" href=""><i class="glyphicon glyphicon-user"></i> {{user.firstName}} <span class="caret"></span></a> <ul id="g-account-menu" class="dropdown-menu" role="menu"> <li><a href=""><i class="glyphicon glyphicon-cog"></i> Configuración</a></li> <li><a ng-click="logout()" href=""><i class="glyphicon glyphicon-lock"></i> Salir</a></li> </ul> </li> </ul> </div> </div> <div class="hidden-md hidden-lg"> <div class="navbar-collapse collapse"> <ul class="nav navbar-nav navbar-right"> <li class="dropdown"> <a class="dropdown-toggle" role="button" data-toggle="dropdown" href=""><i class="glyphicon glyphicon-user"></i> {{user.firstName}} <span class="caret"></span></a> <ul id="g-account-menu" class="dropdown-menu" role="menu"> <li><a ng-click="logout()" href=""><i class="glyphicon glyphicon-lock"></i> Salir</a></li> </ul> </li> </ul> </div> </div> </div> <!-- /container --> </div> <!-- /Header -->'),a.put("views/home.html",'<div class="row"> <div class="col-sm-12"> <div ui-view></div> </div> </div>'),a.put("views/loaddata.html",'<a><strong><i class="glyphicon glyphicon-dashboard"></i> {{title()}} </strong></a> <hr> <div ng-if="response"> <!-- Nav tabs --> <ul ng-if="user.userProfile == \'analista\'" class="nav nav-tabs"> <li ui-sref-active="active"><a ui-sref=".requestdetail"><i class="glyphicon glyphicon-info-sign"></i> Información</a></li> <li ng-if="response.status.id == 6" ng-class="{ active: shouldBeActive() }"><a ui-sref=".budget.originalbudget"><i class="glyphicon glyphicon-list-alt"></i> Presupuesto</a></li> <li ng-if="response.status.id == 6" ui-sref-active="active"><a ui-sref=".survey"><i class="glyphicon glyphicon-file"></i> Encuesta</a></li> <li ng-if="response.status.id == 6" ui-sref-active="active"><a ui-sref=".attached"><i class="glyphicon glyphicon-paperclip"></i> Adjuntos</a></li> </ul> <ul ng-if="user.userProfile == \'coordinador\'" class="nav nav-tabs"> <li ui-sref-active="active"><a ui-sref=".requestdetail"><i class="glyphicon glyphicon-info-sign"></i> Información</a></li> <li ng-if="response.status.id == 4 || response.status.id == 5 || response.status.id == 6" ng-class="{ active: shouldBeActive() }"><a ui-sref=".budget.originalbudget"><i class="glyphicon glyphicon-list-alt"></i> Presupuesto</a></li> <li ng-if="response.status.id == 4 || response.status.id == 5 || response.status.id == 6" ui-sref-active="active"><a ui-sref=".survey"><i class="glyphicon glyphicon-file"></i> Encuesta</a></li> <li ng-if="response.status.id == 4 || response.status.id == 5 || response.status.id == 6" ui-sref-active="active"><a ui-sref=".attached"><i class="glyphicon glyphicon-paperclip"></i> Adjuntos</a></li> <!--<li ng-if="response.status.id == 4 || response.status.id == 5" ui-sref-active="active"><a ui-sref=".decision"><i class="glyphicon glyphicon-ok-sign"></i> Autorización</a></li>--> </ul> <ul ng-if="user.userProfile == \'visitador\'" class="nav nav-tabs"> <li ui-sref-active="active"><a ui-sref=".requestdetail"><i class="glyphicon glyphicon-info-sign"></i> Información</a></li> <li ng-class="{ active: shouldBeActive() }"><a ui-sref=".budget.originalbudget"><i class="glyphicon glyphicon-list-alt"></i> Presupuesto</a></li> <!--<li ui-sref-active="active"><a ui-sref=".budget.currentbudget"><i class="glyphicon glyphicon-list-alt"></i> Presupuesto</a></li>--> <li ui-sref-active="active"><a ui-sref=".survey"><i class="glyphicon glyphicon-file"></i> Encuesta</a></li> <li ui-sref-active="active"><a ui-sref=".attached"><i class="glyphicon glyphicon-paperclip"></i> Adjuntos</a></li> <!--<li ng-if="response.status.id == 3 || response.status.id == 4 || response.status.id == 5" ui-sref-active="active"><a ui-sref=".decision"><i class="glyphicon glyphicon-ok-sign"></i> Finalización</a></li>--> </ul> <!-- Tab panes --> <div class="tab-content"> <br> <div ui-view></div> </div> </div>'),a.put("views/login.html",'<center> <form name="form" class="form-inline" ng-submit="submit(form.$valid)"> <div class="form-group"> <label class="sr-only" for="exampleInputEmail3">Usuario</label> <input type="text" class="form-control" placeholder="Usuario" ng-model="login.identityCard" required> </div> <div class="form-group"> <label class="sr-only" for="exampleInputPassword3">Contraseña</label> <input type="password" class="form-control" placeholder="Password" ng-model="login.password" required> </div> <button class="btn btn-default" ng-click="submit()">Iniciar sesión</button> </form> </center>'),a.put("views/main.html",'<header code=""></header> <!-- Main --> <div class="container-fluid"> <div class="row"> <div class="col-sm-2"> <sidebar></sidebar> </div> <div class="col-sm-10"> <div ui-view></div> </div> </div> </div> <!--<footer class="text-center">This Bootstrap 3 dashboard layout is compliments of <a href="http://www.bootply.com/85850"><strong>Bootply.com</strong></a></footer>-->'),
a.put("views/originalbudget.html",'<div class="table-responsive"> <table class="table table-hover table-condensed table-striped"> <tr> <th><center><strong>No.</strong></center></th> <th><center>Concepto</center></th> <th><center>Descripción</center></th> <th><center>Cantidad</center></th> <th><center>Costo Bs (unitario)</center></th> </tr> <tr ng-repeat="item in budget.item track by $index"> <td><center><strong>{{$index + 1}}</strong></center></td> <td><center>{{item.concept}}</center></td> <td><center>{{item.description}}</center></td> <td><center>{{item.quantity}}</center></td> <td><center>{{formattedCost(item.cost)}}</center></td> </tr> <tr> <td></td> <td></td> <td></td> <td></td> <th><center>Total: {{cost}} </center></th> </tr> </table> </div>'),a.put("views/persondetail.html",'<div ng-if="person"> <a><strong><i class="glyphicon glyphicon-user"></i> Detalles de la persona:</strong></a> </div> <div ng-if="!person"> <a><strong><i class="glyphicon glyphicon-user"></i> No se encontró persona asociada al Código.</strong></a> </div> <hr> <div ng-if="person"> <div class="container-fluid"> <div class="panel panel-primary"> <div class="panel-heading"> <h3 class="panel-title">Datos de la persona</h3> </div> <br> <div class="container-fluid"> <form class="form-horizontal"> <div class="form-group"> <label class="col-sm-1 control-label">Cédula:</label> <div class="col-sm-2"> <p class="form-control-static">{{person.identityCard}}</p> </div> <label class="col-sm-1 control-label">Nombre:</label> <div class="col-sm-3"> <p class="form-control-static">{{person.firstName}} {{person.lastName}}</p> </div> <label class="col-sm-1 control-label">Cargo:</label> <div class="col-sm-1"> <p class="form-control-static">{{person.profile.profile.toUpperCase()}}</p> </div> <div class="col-sm-3"> <button ng-class="{\'myHidden\': person.user.id}" ng-click="createUser()" type="button" class="btn btn-info btn-md">Crear Usuario</button> </div> <label class="col-sm-1 control-label">Edad:</label> <div class="col-sm-1"> <p class="form-control-static">{{age(person.birthDate)}}</p> </div> <label class="col-sm-1 control-label">Email:</label> <div class="col-sm-3"> <p class="form-control-static">{{person.email}}</p> </div> <label class="col-sm-1 control-label">Teléfono:</label> <div class="col-sm-2"> <p class="form-control-static">{{person.phoneNumber}}</p> </div> <label class="col-sm-1 control-label">Género:</label> <div class="col-sm-2"> <p class="form-control-static">{{gender(person.gender)}}</p> </div> <label class="col-sm-1 control-label">Dirección:</label> <div class="col-sm-11"> <p class="form-control-static">{{person.address}}</p> </div> </div> </form> </div> </div> </div> <div class="container-fluid" ng-if="person.user.id"> <div class="panel panel-primary"> <div class="panel-heading"> <h3 class="panel-title">Datos del usuario asociado a la persona</h3> </div> <br> <div class="container-fluid"> <form class="form-horizontal"> <div class="form-group"> <label class="col-sm-1 control-label">Usuario:</label> <div class="col-sm-2"> <p class="form-control-static">{{person.user.userName}}</p> </div> <label class="col-sm-1 control-label">Estatus:</label> <div class="col-sm-1"> <h5><span class="label" ng-class="statusColor(person.user)">{{statusText(person.user)}}</span></h5> </div> <label class="col-sm-1 control-label">Rol:</label> <div class="col-sm-2"> <p class="form-control-static">{{person.user.profile.profile.toUpperCase()}}</p> </div> <div class="col-sm-2" ng-if="user.identityCard != person.identityCard"> <div class="dropdown form-control-static"> <button class="btn btn-primary dropdown-toggle btn-xs" type="button" data-toggle="dropdown">Acciones <span class="caret"></span> </button> <ul class="dropdown-menu dropdown-menu-right"> <li ng-class="{\'disabled\': person.user.available}"><a href="" ng-click="userEnabled()"><i class="glyphicon glyphicon-ok-sign"></i> Habilitar</a></li> <li ng-class="{\'disabled\': !person.user.available}"><a href="" ng-click="userDisabled()"><i class="glyphicon glyphicon-ban-circle"></i> Deshabilitar</a></li> <li><a href="" ng-click="changeRole()"><i class="glyphicon glyphicon-transfer"></i> Cambiar Rol</a></li> </ul> </div> </div> </div> </form> </div> </div> </div> </div>'),a.put("views/personlist.html",'<a href="" ng-click="filter()"><strong><i class="glyphicon glyphicon-search"></i> Búsqueda de Personas</strong></a> <hr> <div class="panel panel-primary"> <div class="panel-heading"> <h2>Personas</h2> </div> <div class="panel-body"> <center> <nav> <ul class="pagination"> <li> <a ng-click="previousPage()" href="" aria-label="Previous"> <span aria-hidden="true">&laquo;</span> </a> </li> <li ng-class="{\'active\': selectedPage == $index}" ng-repeat="i in [].constructor(pages) track by $index"><a ng-click="pageSelected($index)" href="">{{$index + 1}}</a></li> <li> <a ng-click="nextPage()" href="" aria-label="Next"> <span aria-hidden="true">&raquo;</span> </a> </li> </ul> </nav> </center> <br> <div class="table-responsive"> <table class="table table-hover table-condensed table-striped"> <tr> <!--<th><center>No.</center></th>--> <th><center>CI</center></th> <th><center>Nombre</center></th> <th><center>Cargo</center></th> <th><center>Estado</center></th> <th><center>Acción</center></th> </tr> <tr ng-repeat="person in persons track by $index"> <!--<td><center><strong>{{$index + 1}}</strong></center></td>--> <td><center>{{person.identityCard}}</center></td> <td><center>{{person.firstName}} {{person.lastName}}</center></td> <td><center>{{person.profile.profile.toUpperCase()}}</center></td> <td><center>{{person.state.stateName}}</center></td> <td> <center> <button ng-click="detail(person.id)" type="button" class="btn btn-primary btn-xs">Ver</button> </center> </td> </tr> </table> </div> </div> </div>'),a.put("views/requestdetail.html",'<!--<div ng-if="request">\n  <a><strong><i class="glyphicon glyphicon-dashboard"></i> Detalles de la solicitud: # {{request.id}}</strong></a>\n</div>\n\n<div ng-if="!request">\n  <a><strong><i class="glyphicon glyphicon-dashboard"></i> No se encontró visita asociada al código.</strong></a>\n</div>\n\n<hr>--> <div ng-if="request"> <div class="panel-body"> <div class="alert" ng-class="infoClass()" role="alert"> <center> {{info()}} <a ng-if="user.userProfile == \'visitador\' && showButton()" ng-click="finish()" href="" class="alert-link"><strong>Finalizar</strong></a> <a ng-if="user.userProfile == \'coordinador\' && canAssign()" ng-click="assign()" href="" class="alert-link"><strong>Asignar</strong></a> <a ng-if="user.userProfile == \'coordinador\' && canReview()" ng-click="review()" href="" class="alert-link"><strong>Revisar</strong></a> <a ng-if="user.userProfile == \'coordinador\' && canReview()">|</a> <a ng-if="user.userProfile == \'coordinador\' && canReview()" ng-click="authorize()" href="" class="alert-link"><strong>Autorizar</strong></a> </center> </div> <center> <ul class="list-inline"> <li><button ng-click="downloadBudget()" type="button" class="btn btn-info btn-xs">Descargar Presupuesto</button></li> <li><button ng-click="downloadGuarantee()" type="button" class="btn btn-info btn-xs">Descargar Carta Aval</button></li> <li ng-if="user.userProfile == \'visitador\'"><button ng-click="downloadSurvey()" type="button" class="btn btn-info btn-xs">Descargar Encuesta</button></li> </ul> </center> <!--<div ng-if="user.userProfile == \'analista\'">\n        <div ng-if="request.statusId == 2">\n          <div class="alert alert-danger" role="alert">\n            <center>Solicitud de visita no asignada.</center>\n          </div>     \n        </div>\n        <div ng-if="request.statusId == 3">\n          <div class="alert alert-info" role="alert">\n            <center>Solicitud de visita asignada.</center>\n          </div>    \n        </div>\n        <div ng-if="request.statusId == 4">\n          <div class="alert alert-success" role="alert">\n            <center>Solicitud atendida.</center>\n          </div>      \n        </div>\n        <div ng-if="request.statusId == 5">\n          <div class="alert alert-warning" role="alert">\n            <center>Solicitud de visita en revisión.</center>\n          </div>\n        </div>\n        <div ng-if="request.statusId == 6">\n          <div class="alert alert-success" role="alert">\n            <center>Solicitud de visita completada.</center>\n          </div>\n        </div>\n      </div>\n\n      <div ng-if="user.userProfile == \'coordinador\'">\n        <div ng-if="request.statusId == 2">\n          <div class="alert alert-danger" role="alert">\n            <center>Solicitud de visita no asignada. <a ng-click="assign()" href="" class="alert-link"><strong>Asignar</strong></a></center>\n          </div>     \n        </div>\n        <div ng-if="request.statusId == 3">\n          <div class="alert alert-info" role="alert">\n            <center>Solicitud de visita asignada.</center>\n          </div>      \n        </div>\n        <div ng-if="request.statusId == 4">\n          <div class="alert alert-success" role="alert">\n            <center>Solicitud atendida.</center>\n          </div>      \n        </div>\n        <div ng-if="request.statusId == 5">\n          <div class="alert alert-warning" role="alert">\n            <center>Solicitud de visita en revisión.</center>\n          </div>\n        </div>\n        <div ng-if="request.statusId == 6">\n          <div class="alert alert-success" role="alert">\n            <center>Solicitud de visita completada.</center>\n          </div>\n        </div>\n      </div>\n\n      <div ng-if="user.userProfile == \'visitador\'">\n        <div ng-if="request.statusId == 3">\n          <div class="alert alert-danger" role="alert">\n            <center>\n              Solicitud de visita pendiente.<br>\n              </center>\n          </div>\n          <center>\n            <ul class="list-inline">\n              <li><button ng-click="downloadBudget()" type="button" class="btn btn-info btn-xs">Ver presupuesto</button></li>\n              <li><button ng-click="downloadGuarantee()" type="button" class="btn btn-info btn-xs">Ver carta aval</button></li>\n            </ul>\n            </center>\n        </div> \n        <div ng-if="request.statusId == 4">\n          <div class="alert alert-info" role="alert">\n            <center>Solicitud atendida.</center>\n          </div>      \n        </div> \n        <div ng-if="request.statusId == 5">\n          <div class="alert alert-warning" role="alert">\n            <center>\n              Solicitud de visita en revisión.<br>\n              </center>\n          </div>\n          <center>\n            <ul class="list-inline">\n              <li><button ng-click="downloadBudget()" type="button" class="btn btn-info btn-xs">Ver presupuesto</button></li>\n              <li><button ng-click="downloadGuarantee()" type="button" class="btn btn-info btn-xs">Ver carta aval</button></li>\n            </ul>\n            </center>\n        </div>\n        <div ng-if="request.statusId == 6">\n          <div class="alert alert-success" role="alert">\n            <center>\n              Solicitud de visita completada.<br>\n              </center>\n          </div>\n          <center>\n            <ul class="list-inline">\n              <li><button ng-click="downloadBudget()" type="button" class="btn btn-info btn-xs">Ver presupuesto</button></li>\n              <li><button ng-click="downloadGuarantee()" type="button" class="btn btn-info btn-xs">Ver carta aval</button></li>\n            </ul>\n            </center>\n        </div>\n      </div>--> <div class="row"> <div class="col-sm-12 col-md-8"> <div class="panel panel-primary"> <div class="panel-heading"> <h3 class="panel-title">Datos de la Institución Prestadora de Servicio</h3> </div> <div class="panel-body"> <form class="form-horizontal"> <div class="form-group"> <label class="col-sm-2 control-label">Nombre:</label> <div class="col-sm-10"> <p class="form-control-static">{{request.guaranteeLetter.budget.affiliated.name}}</p> </div> <label class="col-sm-2 control-label">Estado:</label> <div class="col-sm-3"> <p class="form-control-static">{{request.guaranteeLetter.budget.affiliated.state.stateName}}</p> </div> <label class="col-sm-2 control-label">Teléfono:</label> <div class="col-sm-2"> <p class="form-control-static">{{request.guaranteeLetter.budget.affiliated.phoneNumber}}</p> </div> <label class="col-sm-1 control-label">RIF:</label> <div class="col-sm-2"> <p class="form-control-static">{{request.guaranteeLetter.budget.affiliated.rif}}</p> </div> <div ng-if="request.guaranteeLetter.budget.affiliated.portal"> <label class="col-sm-2 control-label">Portal:</label> <div class="col-sm-10"> <p class="form-control-static">{{request.guaranteeLetter.budget.affiliated.portal}}</p> </div> </div> <label class="col-sm-2 control-label">Dirección:</label> <div class="col-sm-10"> <p class="form-control-static">{{request.guaranteeLetter.budget.affiliated.address}}</p> </div> </div> </form> </div> </div> <!--<div class="panel panel-primary">\n          <div class="panel-heading">\n            <h3 class="panel-title">Datos del asegurado</h3>\n          </div>\n          <div class="panel-body">\n            <form class="form-horizontal">\n              <div class="form-group">\n                <label class="col-sm-3 col-md-2 control-label">Nombre:</label>\n                <div class="col-sm-3 col-md-2">\n                  <p class="form-control-static">{{request.guaranteeLetter.policy.owner.firstName}} {{request.guaranteeLetter.policy.holder.lastName}}</p>\n                </div>\n                <label class="col-sm-3 col-md-2 control-label">Cédula:</label>\n                <div class="col-sm-3 col-md-2">\n                  <p class="form-control-static">{{request.guaranteeLetter.policy.owner.identityCard}}</p>\n                </div>\n                <label class="col-sm-3 col-md-2 control-label">Género:</label>\n                <div class="col-sm-3 col-md-2">\n                  <p class="form-control-static">{{gender(request.guaranteeLetter.policy.owner.gender)}}</p>\n                </div>\n                <label class="col-sm-3 col-md-2 control-label">Edad:</label>\n                <div class="col-sm-3 col-md-2">\n                  <p class="form-control-static">{{age(request.guaranteeLetter.policy.owner.birthDate)}}</p>\n                </div>\n                <label class="col-sm-3 col-md-2 control-label">Teléfono:</label>\n                <div class="col-sm-3 col-md-2">\n                  <p class="form-control-static">{{request.guaranteeLetter.policy.owner.phoneNumber}}</p>\n                </div>\n                <label class="col-sm-2 col-md-1 control-label">Email:</label>\n                <div class="col-sm-4 col-md-3">\n                  <p class="form-control-static">{{request.guaranteeLetter.policy.owner.email}}</p>\n                </div>\n                <label class="col-sm-3 col-md-2 control-label">Dirección:</label>\n                <div class="col-sm-9 col-md-10">\n                  <p class="form-control-static">{{request.guaranteeLetter.policy.holder.address}}</p>\n                </div>\n              </div>\n            </form>\n          </div>\n        </div>--> <div class="panel panel-primary"> <div class="panel-heading"> <h3 class="panel-title">Datos del beneficiario</h3> </div> <div class="panel-body"> <form class="form-horizontal"> <div class="form-group"> <label class="col-sm-3 col-md-2 control-label">Nombre:</label> <div class="col-sm-3 col-md-3"> <p class="form-control-static">{{request.guaranteeLetter.beneficiary.firstName}} {{request.guaranteeLetter.beneficiary.lastName}}</p> </div> <label class="col-sm-3 col-md-2 control-label">Cédula:</label> <div class="col-sm-3 col-md-2"> <p class="form-control-static">{{request.guaranteeLetter.beneficiary.identityCard}}</p> </div> <label class="col-sm-3 col-md-1 control-label">Género:</label> <div class="col-sm-3 col-md-2"> <p class="form-control-static">{{gender(request.guaranteeLetter.beneficiary.gender)}}</p> </div> <label class="col-sm-3 col-md-2 control-label">Edad:</label> <div class="col-sm-3 col-md-1"> <p class="form-control-static">{{age(request.guaranteeLetter.beneficiary.birthDate)}}</p> </div> <label class="col-sm-3 col-md-2 control-label">Teléfono:</label> <div class="col-sm-3 col-md-2"> <p class="form-control-static">{{request.guaranteeLetter.beneficiary.phoneNumber}}</p> </div> <label class="col-sm-2 col-md-1 control-label">Email:</label> <div class="col-sm-4 col-md-4"> <p class="form-control-static">{{request.guaranteeLetter.beneficiary.email}}</p> </div> <label class="col-sm-3 col-md-2 control-label">Dirección:</label> <div class="col-sm-9 col-md-10"> <p class="form-control-static">{{request.guaranteeLetter.beneficiary.address}}</p> </div> </div> </form> </div> </div> </div> <div class="col-sm-12 col-md-4"> <div class="panel panel-primary"> <div class="panel-heading">Historial de observaciones:</div> <div id="box" class="panel-body" style="overflow-y:scroll; overflow-x:hidden; height:300px"> <div ng-repeat="comment in comments"> <div class="row"> <div class="col-sm-8"> <h6><strong>{{comment.commenter.person.firstName}} {{comment.commenter.person.lastName}} ({{comment.commenter.person.profile.profile}}):</strong></h6> <p class="text-justify">{{comment.comment}}</p> </div> <div class="col-sm-4"> <h6 class="text-right"><span class="label label-primary">{{date(comment.date)}}</span></h6> <h6 class="text-right"><span class="label label-danger">{{hour(comment.date)}}</span></h6> </div> </div> </div> </div> </div> </div> </div> <!--</div>--> </div> </div>'),a.put("views/requestlist.html",'<!--<a><strong><i class="glyphicon glyphicon-dashboard"></i> Solicitudes</strong></a>--><!--<div ng-if="requests.length == 0">\n		<a class="text-danger"><strong><i class="glyphicon glyphicon-warning-sign"></i> No tiene registro de Solicitudes de Visitas Clínicas</strong></a>\n		<hr>\n	</div>--><!--<div ng-if="requests.length > 0">--> <a href="" ng-click="filter()"><strong><i class="glyphicon glyphicon-search"></i> Búsqueda de Solicitud de Visita</strong></a> <hr> <div class="panel panel-primary"> <div class="panel-heading"> <h2>Solicitudes de Visitas - {{category()}}</h2> </div> <div> <div class="panel-body"> <center> <nav> <ul class="pagination"> <li> <a ng-click="previousPage()" href="" aria-label="Previous"> <span aria-hidden="true">&laquo;</span> </a> </li> <li ng-class="{\'active\': selectedPage == $index}" ng-repeat="i in [].constructor(pages) track by $index"><a ng-click="pageSelected($index)" href="">{{$index + 1}}</a></li> <li> <a ng-click="nextPage()" href="" aria-label="Next"> <span aria-hidden="true">&raquo;</span> </a> </li> </ul> </nav> </center> <br> <div class="table-responsive"> <table class="table table-hover table-condensed table-striped"> <tr> <th><center>Código de Visita</center></th> <th><center>Código Carta Aval</center></th> <th><center>Fecha Solicitud</center></th> <th><center>Estatus</center></th> <th><center>Acción</center></th> </tr> <tr ng-repeat="request in requests"> <td><center>{{request.id}}</center></td> <td><center>{{request.guaranteeLetter.id}}</center></td> <td><center>{{date(request.startDate)}}</center></td> <td><center><span class="label" ng-class="status(request.status.status)">{{statusText(request.status.status)}}</span></center></td> <!--<td><center>status({{request.status.status}})</center></td>--> <!--<td><center><p style="width: 100px" class="img-rounded" ng-class="status(request.status.status)">{{request.status.status}}</p></center></td>--> <td> <center> <button ng-click="detail(request.id)" type="button" class="btn btn-primary btn-xs">Ver</button> </center> </td> </tr> </table> </div> </div> </div> </div> <!--</div>-->'),a.put("views/requestmodal.html",'<div class="modal-header modal-header-primary"> <h3 class="modal-title">Suministrar la siguiente información</h3> </div> <div class="modal-body"> <div class="container-fluid"> <form name="form" class="form-horizontal"> <div class="form-group"> <label class="col-sm-6 control-label">Fecha límite para realizar visita:</label> <div class="col-sm-3 input-group"> <input type="text" class="form-control" uib-datepicker-popup="{{format}}" ng-model="dt1" is-open="popup1.opened" datepicker-options="dateOptions" readonly close-text="Cerrar" clear-text="Limpiar" current-text="Hoy" alt-input-formats="altInputFormats" datepicker-options="dateOptions" required> <span class="input-group-btn"> <button type="button" class="btn btn-default" ng-click="open1()"><i class="glyphicon glyphicon-calendar"></i></button> </span> </div> </div> <div class="form-group"> <textarea class="form-control" ng-model="coment" rows="5" id="comment" placeholder="Ingrese observación aquí. (Opcional)"></textarea> </div> </form> </div> </div> <div class="modal-footer"> <button class="btn btn-primary" type="button" ng-click="ok()" ng-disabled="!validDate()">OK</button> <button class="btn btn-warning" type="button" ng-click="cancel()">Cancelar</button> </div>'),a.put("views/sidebar.html",'<!-- Left column --><!--<a><strong><i class="glyphicon glyphicon-wrench"></i> Opciones</strong></a>--> <a style="color: white">.</a> <hr> <ul class="nav nav-stacked"> <li ng-if="user.userProfile == \'analista\' || user.userProfile == \'coordinador\' || user.userProfile == \'visitador\'" class="nav-header"> <a ng-click="liked = !liked" href="" data-toggle="collapse" data-target="#userMenu">Solicitud de Visita <i ng-class="{\'glyphicon glyphicon-chevron-right\': liked, \'glyphicon glyphicon-chevron-down\': !liked}"></i></a> <div ng-if="user.userProfile == \'analista\'"> <ul class="nav nav-stacked collapse in" id="userMenu"> <li><a href="" ng-click="refresh()"><i class="glyphicon glyphicon-refresh"></i> Resfrescar </a></li> <li><a href="" ng-click="changeFilter(\'\')"><i class="glyphicon glyphicon-envelope"></i> Todas <span class="badge badge-info"></span></a></li> <li><a href="" ng-click="changeFilter(\'2\')"><i class="glyphicon glyphicon-envelope"></i> No asignadas <span class="badge badge-info">{{porAsignarse}}</span></a></li> <li><a href="" ng-click="changeFilter(\'3\')"><i class="glyphicon glyphicon-envelope"></i> Asignadas <span class="badge badge-info">{{asignadas}}</span></a></li> <li><a href="" ng-click="changeFilter(\'4\')"><i class="glyphicon glyphicon-envelope"></i> Atendidas <span class="badge badge-info">{{atendidas}}</span></a></li> <li><a href="" ng-click="changeFilter(\'5\')"><i class="glyphicon glyphicon-envelope"></i> En revisión <span class="badge badge-info">{{enRevision}}</span></a></li> <li><a href="" ng-click="changeFilter(\'6\')"><i class="glyphicon glyphicon-envelope"></i> Finalizadas <span class="badge badge-info">{{completadas}}</span></a></li> </ul> </div> <div ng-if="user.userProfile == \'coordinador\'"> <ul class="nav nav-stacked collapse in" id="userMenu"> <!-- collapse in para que salga abierto --> <li><a href="" ng-click="refresh()"><i class="glyphicon glyphicon-refresh"></i> Resfrescar </a></li> <li><a href="" ng-click="changeFilter(\'\')"><i class="glyphicon glyphicon-envelope"></i> Todas <span class="badge badge-info"></span></a></li> <li><a href="" ng-click="changeFilter(\'2\')"><i class="glyphicon glyphicon-envelope"></i> No asignadas <span class="badge badge-info">{{porAsignarse}}</span></a></li> <li><a href="" ng-click="changeFilter(\'3\')"><i class="glyphicon glyphicon-envelope"></i> Asignadas <span class="badge badge-info">{{asignadas}}</span></a></li> <li><a href="" ng-click="changeFilter(\'4\')"><i class="glyphicon glyphicon-envelope"></i> Atendidas <span class="badge badge-info">{{atendidas}}</span></a></li> <li><a href="" ng-click="changeFilter(\'5\')"><i class="glyphicon glyphicon-envelope"></i> En revisión <span class="badge badge-info">{{enRevision}}</span></a></li> <li><a href="" ng-click="changeFilter(\'6\')"><i class="glyphicon glyphicon-envelope"></i> Finalizadas <span class="badge badge-info">{{completadas}}</span></a></li> </ul> </div> <div ng-if="user.userProfile == \'visitador\'"> <ul class="nav nav-stacked collapse in" id="userMenu"> <!-- collapse in para que salga abierto --> <li><a href="" ng-click="refresh()"><i class="glyphicon glyphicon-refresh"></i> Resfrescar </a></li> <li><a href="" ng-click="changeFilter(\'\')"><i class="glyphicon glyphicon-envelope"></i> Todas <span class="badge badge-info"></span></a></li> <li><a href="" ng-click="changeFilter(\'3\')"><i class="glyphicon glyphicon-envelope"></i> Por atender <span class="badge badge-info">{{asignadas}}</span></a></li> <li><a href="" ng-click="changeFilter(\'5\')"><i class="glyphicon glyphicon-envelope"></i> En revisión <span class="badge badge-info">{{enRevision}}</span></a></li> <li><a href="" ng-click="changeFilter(\'6\')"><i class="glyphicon glyphicon-envelope"></i> Finalizadas <span class="badge badge-info">{{completadas}}</span></a></li> </ul> </div> </li> </ul> <div ng-if="user.userProfile == \'analista\'"> <hr> <ul class="nav nav-stacked"> <li class="nav-header"> <a ng-click="liked2 = !liked2" href="" data-toggle="collapse" data-target="#guaranteeMenu">Carta Aval <i ng-class="{\'glyphicon glyphicon-chevron-right\': liked2, \'glyphicon glyphicon-chevron-down\': !liked2}"></i></a> <div ng-if="user.userProfile == \'analista\'"> <ul class="nav nav-stacked collapse in" id="guaranteeMenu"> <li><a href="" ng-click="guaranteeFilter(\'\')"><i class="glyphicon glyphicon-envelope"></i> Todas <span class="badge badge-info"></span></a></li> <!--<li><a href=""><i class="glyphicon glyphicon-envelope"></i> No asignadas <span class="badge badge-info">{{porAsignarse}}</span></a></li>\n                                <li><a href=""><i class="glyphicon glyphicon-envelope"></i> Asignadas <span class="badge badge-info">{{asignadas}}</span></a></li>\n                                <li><a href=""><i class="glyphicon glyphicon-envelope"></i> Atendidas <span class="badge badge-info">{{atendidas}}</span></a></li>--> <!--<li><a href="" ng-click="changeFilter(\'6\')"><i class="glyphicon glyphicon-envelope"></i> Finalizadas <span class="badge badge-info">{{completadas}}</span></a></li>--> </ul> </div> </li> </ul> </div> <div ng-if="user.userProfile == \'administrador\'"> <!--<ul class="nav nav-stacked">\n                    <li class="nav-header"> <a ng-click="liked = !liked" href="" data-toggle="collapse" data-target="#usersMenu">Usuarios <i ng-class="{\'glyphicon glyphicon-chevron-right\': liked, \'glyphicon glyphicon-chevron-down\': !liked}"></i></a>\n                        <ul class="nav nav-stacked collapse in" id="usersMenu">\n                            <li><a href="" ng-click="searchUsers()"><i class="glyphicon glyphicon-user"></i> Todos <span class="badge badge-info"></span></a></li>\n                        </ul>\n                    </li>\n                </ul>\n\n                <<hr>--> <ul class="nav nav-stacked"> <li class="nav-header"> <a ng-click="liked2 = !liked2" href="" data-toggle="collapse" data-target="#personsMenu">Personas <i ng-class="{\'glyphicon glyphicon-chevron-right\': liked2, \'glyphicon glyphicon-chevron-down\': !liked2}"></i></a> <ul class="nav nav-stacked collapse in" id="personsMenu"> <li><a href="" ng-click="searchPersons()"><i class="glyphicon glyphicon-user"></i> Todas <span class="badge badge-info"></span></a></li> </ul> </li> </ul> </div> <hr> <!--<hr>\n\n            <a href=""><strong><i class="glyphicon glyphicon-link"></i> Resources</strong></a>\n\n            <hr>\n\n            <ul class="nav nav-pills nav-stacked">\n                <li class="nav-header"></li>\n                <li><a href=""><i class="glyphicon glyphicon-list"></i> Layouts &amp; Templates</a></li>\n                <li><a href=""><i class="glyphicon glyphicon-briefcase"></i> Toolbox</a></li>\n                <li><a href=""><i class="glyphicon glyphicon-link"></i> Widgets</a></li>\n                <li><a href=""><i class="glyphicon glyphicon-list-alt"></i> Reports</a></li>\n                <li><a href=""><i class="glyphicon glyphicon-book"></i> Pages</a></li>\n                <li><a href=""><i class="glyphicon glyphicon-star"></i> Social Media</a></li>\n            </ul>\n\n            <hr>\n            <ul class="nav nav-stacked">\n                <li class="active"><a href="" title="The Bootstrap Playground" target="ext">Playground</a></li>\n                <li><a href="">Bootstrap 3</a></li>\n                <li><a href="" title="Bootstrap 3 Panel">Panels</a></li>\n                <li><a href="" title="Bootstrap 3 Icons">Glyphicons</a></li>\n                <li><a href="">Layout</a></li>\n            </ul>\n\n            <hr>\n\n            <a href=""><strong><i class="glyphicon glyphicon-list"></i> More Templates</strong></a>\n\n            <hr>\n\n            <ul class="nav nav-stacked">\n                <li class="active"><a rel="nofollow" href="" target="ext">Premium Themes</a></li>\n                <li><a rel="nofollow" href="">Wrap Bootstrap</a></li>\n                <li><a rel="nofollow" href="">BootstrapZero</a></li>\n            </ul>-->'),a.put("views/survey.html",'<div class="panel panel-primary"> <div class="panel-heading"> <h2>Encuesta</h2> </div> <div class="panel-body"> <form class="form-horizontal"> <!--<div class="form-group">\n        <label class="col-sm-12">¿Cómo evalúa el trato médico?</label>\n        <div class="col-sm-12">\n          <label class="radio-inline"><input type="radio" ng-model="e" ng-value="0" ng-disabled="disabled()">Excelente</label>\n          <label class="radio-inline"><input type="radio" ng-model="e" ng-value="1" ng-disabled="disabled()">Bueno</label>\n          <label class="radio-inline"><input type="radio" ng-model="e" ng-value="2" ng-disabled="disabled()">Regular</label>\n          <label class="radio-inline"><input type="radio" ng-model="e" ng-value="3" ng-disabled="disabled()">Malo</label>\n          <label class="radio-inline"><input type="radio" ng-model="e" ng-value="4" ng-disabled="disabled()">Muy malo</label>\n        </div>\n      </div>--> <!--<div class="form-group" ng-repeat="question in form.question track by $index">        \n        <label class="col-sm-12">{{question.question}}</label>\n        <div class="col-sm-12">\n          <label class="radio-inline"><input type="radio" ng-model="$parent.values[$index]" ng-value="5" ng-required="!$parent.values[$index]" ng-disabled="disabled()">Excelente</label>\n          <label class="radio-inline"><input type="radio" ng-model="$parent.values[$index]" ng-value="4" ng-required="!$parent.values[$index]" ng-disabled="disabled()">Bueno</label>\n          <label class="radio-inline"><input type="radio" ng-model="$parent.values[$index]" ng-value="3" ng-required="!$parent.values[$index]" ng-disabled="disabled()">Regular</label>\n          <label class="radio-inline"><input type="radio" ng-model="$parent.values[$index]" ng-value="2" ng-required="!$parent.values[$index]" ng-disabled="disabled()">Malo</label>\n          <label class="radio-inline"><input type="radio" ng-model="$parent.values[$index]" ng-value="1" ng-required="!$parent.values[$index]" ng-disabled="disabled()">Muy malo</label>\n        </div>\n      </div>--> <div class="table-responsive"> <table class="table table-hover table-condensed table-striped"> <tr> <th><center>No.<strong></strong></center></th> <th><center>Aspecto a Calificar</center></th> <th><center>Calificación</center></th> </tr> <tr ng-repeat="question in form.question track by $index"> <td><center><strong>{{$index + 1}}</strong></center></td> <td><center>{{question.question}}</center></td> <td> <center> <label class="radio-inline"><input type="radio" ng-model="$parent.values[$index]" ng-value="5" ng-required="!$parent.values[$index]" ng-disabled="disabled()">Excelente</label> <label class="radio-inline"><input type="radio" ng-model="$parent.values[$index]" ng-value="4" ng-required="!$parent.values[$index]" ng-disabled="disabled()">Bueno</label> <label class="radio-inline"><input type="radio" ng-model="$parent.values[$index]" ng-value="3" ng-required="!$parent.values[$index]" ng-disabled="disabled()">Regular</label> <label class="radio-inline"><input type="radio" ng-model="$parent.values[$index]" ng-value="2" ng-required="!$parent.values[$index]" ng-disabled="disabled()">Malo</label> <label class="radio-inline"><input type="radio" ng-model="$parent.values[$index]" ng-value="1" ng-required="!$parent.values[$index]" ng-disabled="disabled()">Muy malo</label> <!--<label class="radio-inline"><input type="radio">Excelente</label>\n                <label class="radio-inline"><input type="radio">Bueno</label>\n                <label class="radio-inline"><input type="radio">Regular</label>\n                <label class="radio-inline"><input type="radio">Malo</label>\n                <label class="radio-inline"><input type="radio">Muy malo</label>--> </center> </td> </tr> </table> </div> <center ng-if="!disabled()"> <button class="btn btn-md btn-info" ng-click="loadData()"> <span class="glyphicon glyphicon-open"></span> Cargar encuesta </button> <p class="help-block">Las nuevas cargas sustituirán las anteriores</p> </center> </form> </div> </div>'),
a.put("views/userconfiguration.html","<p>This is the userconfiguration view.</p>"),a.put("views/userlist.html",'<a href="" ng-click="filter()"><strong><i class="glyphicon glyphicon-search"></i> Búsqueda de Usuarios</strong></a> <hr> <div class="panel panel-primary"> <div class="panel-heading"> <h2>Usuarios</h2> </div> <div class="panel-body"> <center> <nav> <ul class="pagination"> <li> <a ng-click="previousPage()" href="" aria-label="Previous"> <span aria-hidden="true">&laquo;</span> </a> </li> <li ng-class="{\'active\': selectedPage == $index}" ng-repeat="i in [].constructor(pages) track by $index"><a ng-click="pageSelected($index)" href="">{{$index + 1}}</a></li> <li> <a ng-click="nextPage()" href="" aria-label="Next"> <span aria-hidden="true">&raquo;</span> </a> </li> </ul> </nav> </center> <br> <div class="table-responsive"> <table class="table table-hover table-condensed table-striped"> <tr> <th><center>Código de Visita</center></th> <th><center>Código Carta Aval</center></th> <th><center>Fecha Solicitud</center></th> <th><center>Estatus</center></th> <th><center>Acción</center></th> </tr> <tr ng-repeat="request in requests"> <td><center>{{request.id}}</center></td> <td><center>{{request.guaranteeLetter.id}}</center></td> <td><center>{{date(request.startDate)}}</center></td> <td><center><span class="label" ng-class="status(request.status.status)">{{statusText(request.status.status)}}</span></center></td> <!--<td><center>status({{request.status.status}})</center></td>--> <!--<td><center><p style="width: 100px" class="img-rounded" ng-class="status(request.status.status)">{{request.status.status}}</p></center></td>--> <td> <center> <button ng-click="detail(request.id)" type="button" class="btn btn-primary btn-xs">Ver</button> </center> </td> </tr> </table> </div> </div> </div>')}]);