"use strict";angular.module("frontend2App",["ngAnimate","ngSanitize","ngTouch","ui.router","restangular","toastr","angular-loading-bar","ui.bootstrap","LocalStorageModule","file-model"]).config(["$stateProvider","$urlRouterProvider",function(a,b){b.otherwise("VCWebApp"),a.state("VCWebApp",{url:"/VCWebApp",controller:"InitCtrl"}).state("login",{url:"/login",templateUrl:"views/login.html",controller:"LoginCtrl"}).state("main",{url:"/",templateUrl:"views/main.html","abstract":!0}).state("main.home",{url:"inicio",templateUrl:"views/home.html",controller:"HomeCtrl","abstract":!0}).state("main.home.requestlist",{url:"/solicitud",templateUrl:"views/requestlist.html",controller:"RequestlistCtrl",params:{filter:""},resolve:{response:["$stateParams","request",function(a,b){return b.getRequest(1,10,a.filter).then(function(a){return a},function(a){return a})}]}}).state("main.home.loaddata",{url:"/solicitud/:id/cargardatos",templateUrl:"views/loaddata.html",controller:"LoaddataCtrl","abstract":!0,resolve:{response:["$rootScope","$stateParams","request",function(a,b,c){return c.getById(b.id).then(function(b){return a.statusGroups=b.data.statusGroups,b},function(a){return a})}]}}).state("main.home.loaddata.requestdetail",{url:"/detalles",templateUrl:"views/requestdetail.html",controller:"RequestdetailCtrl"}).state("main.home.loaddata.budget",{url:"/presupuesto",templateUrl:"views/budget.html",controller:"BudgetCtrl",resolve:{budgetData:["$stateParams","budget",function(a,b){return b.getByRequestId(a.id).then(function(a){return a},function(a){return a})}]}}).state("main.home.loaddata.survey",{url:"/encuesta",templateUrl:"views/survey.html",controller:"SurveyCtrl",resolve:{surveyData:["$stateParams","survey",function(a,b){return b.getByRequestId(a.id).then(function(a){return a},function(a){return a})}]}}).state("main.home.loaddata.attached",{url:"/adjunto",templateUrl:"views/attached.html",controller:"AttachedCtrl"}).state("main.home.loaddata.decision",{url:"/accion",templateUrl:"views/decision.html",controller:"DecisionCtrl"}).state("main.home.guaranteeletterdetail",{url:"/cartaaval/:code/detalles",templateUrl:"views/guaranteeletterdetail.html",controller:"GuaranteeletterdetailCtrl",resolve:{response:["$stateParams","guaranteeletter",function(a,b){return b.getGuaranteeLetter({code:a.code}).then(function(a){return a},function(a){return a})}]}})}]).config(["localStorageServiceProvider",function(a){a.setPrefix("VCWebApp")}]).run(["$state",function(a){a.go("login")}]),angular.module("frontend2App").controller("MainCtrl",function(){this.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}),$(document).ready(function(){$(".alert").addClass("in").fadeOut(4500),$("[data-toggle=collapse]").click(function(){console.log("epa"),$(this).find("i").toggleClass("glyphicon-chevron-right glyphicon-chevron-down")})}),angular.module("frontend2App").controller("LoginCtrl",["$scope","$log","$state","toastr","session",function(a,b,c,d,e){a.login={},a.submit=function(f){if(f){var g={identityCard:a.login.identityCard,password:a.login.password};e.login(g).then(function(a){e.setToken(a.data.token),e.setCurrentUser(a.data),c.go("main.home.requestlist",{filter:""})},function(c){b.log(c.status),a.login={},404==c.status?d.warning("Cédula y/o contraseña errónea","Error"):500==c.status&&d.error("Ocurrió un error. Intente de nuevo.","Error")})}}}]),angular.module("frontend2App").directive("header",["$state","toastr","guaranteeletter","session",function(a,b,c,d){return{templateUrl:"views/header.html",restrict:"E",scope:{code:"="},link:function(b,c,e,f){b.search=function(){var c=d.getCurrentUser();"analista"==c.userProfile?a.go("main.home.guaranteeletterdetail",{code:b.code}):a.go("main.home.loaddata.requestdetail",{id:b.code})}},controller:["$scope","$state","session","guaranteeletter",function(a,b,c,d){a.user=c.getCurrentUser(),"analista"==a.user.userProfile?a.placeholder="Código carta aval":a.placeholder="Código visita clínica",a.logout=function(){c.logout().then(function(a){b.go("login")},function(a){console.log("Ocurrió un error"),b.go("login")})}}]}}]),angular.module("frontend2App").factory("session",["vcrestangular","localStorageService",function(a,b){var c={};return c.login=function(b){return a.all("session").post(b)},c.logout=function(){var c=b.get("token");return b.remove("token"),a.all("session").remove({},{token:c})},c.setToken=function(a){b.set("token",a)},c.getToken=function(){return b.get("token")},c.setCurrentUser=function(a){var c={userId:a.userId,firstName:a.user.person.firstName,lastName:a.user.person.lastName,identityCard:a.user.person.identityCard,email:a.user.person.email,userProfile:a.user.profile.profile};b.set("currentUser",c)},c.getCurrentUser=function(){return b.get("currentUser")},c}]),angular.module("frontend2App").factory("vcrestangular",["Restangular","baseUrl",function(a,b){var c=b;return a.withConfig(function(a){a.setBaseUrl(c),a.setFullResponse(!0)})}]),angular.module("frontend2App").controller("HomeCtrl",function(){this.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}),angular.module("frontend2App").directive("sidebar",["$rootScope",function(a){return{templateUrl:"views/sidebar.html",restrict:"E",scope:{},controller:["$scope","$rootScope","$state","session",function(a,b,c,d){a.user=d.getCurrentUser(),b.$watch("statusGroups",function(){if(b.statusGroups){a.porAsignarse=a.asignadas=a.atendidas=a.enRevision=a.completadas="";for(var c=0;c<b.statusGroups.length;c++)"por asignar"==b.statusGroups[c].status?a.porAsignarse=b.statusGroups[c].cantidad:"asignada"==b.statusGroups[c].status?a.asignadas=b.statusGroups[c].cantidad:"atendida"==b.statusGroups[c].status?a.atendidas=b.statusGroups[c].cantidad:"en revision"==b.statusGroups[c].status?a.enRevision=b.statusGroups[c].cantidad:a.completadas=b.statusGroups[c].cantidad}}),a.changeFilter=function(a){c.go("main.home.requestlist",{filter:a},{reload:!0})}}]}}]),angular.module("frontend2App").controller("RequestlistCtrl",["$scope","$rootScope","$stateParams","helpers","$state","toastr","session","request","response",function(a,b,c,d,e,f,g,h,i){var j=10;a.selectedPage=0,a.user=g.getCurrentUser(),a.selectedFilter=c.filter,500==i.status?f.error("Ocurrió un error. Intente de nuevo.","Error"):(a.requests=i.data.requests,a.pages=i.data.pageCount,b.statusGroups=i.data.statusGroups),"analista"==a.user.userProfile?a.filters=[{filter:"Todas",statusId:""},{filter:"Por asignar",statusId:"2"},{filter:"Asignada",statusId:"3"},{filter:"Atendida",statusId:"4"},{filter:"En revisión",statusId:"5"},{filter:"Completada",statusId:"6"},{filter:"Finalizada",statusId:"7"}]:"coordinador"==a.user.userProfile?a.filters=[{filter:"Todas",statusId:""},{filter:"Por asignar",statusId:"2"},{filter:"Asignada",statusId:"3"},{filter:"Atendida",statusId:"4"},{filter:"En revisión",statusId:"5"},{filter:"Completada",statusId:"6"},{filter:"Finalizada",statusId:"7"}]:a.filters=[{filter:"Todas",statusId:""},{filter:"Por atender",statusId:"3"},{filter:"Atendida",statusId:"4"},{filter:"En revisión",statusId:"5"},{filter:"Completada",statusId:"6"},{filter:"Finalizada",statusId:"7"}],a.statusText=function(b){if("analista"==a.user.userProfile){if("por asignar"==b)return"por asignar";if("asignada"==b)return"asignada";if("atendida"==b)return"atendida";if("en revision"==b)return"en revision";if("completada"==b)return"completada";if("finalizada"==b)return"finalizada"}if("coordinador"==a.user.userProfile){if("por asignar"==b)return"por asignar";if("asignada"==b)return"asignada";if("atendida"==b)return"atendida";if("en revision"==b)return"en revision";if("completada"==b)return"completada";if("finalizada"==b)return"finalizada"}if("visitador"==a.user.userProfile){if("asignada"==b)return"pendiente";if("atendida"==b)return"atendida";if("en revision"==b)return"en revision";if("completada"==b)return"completada";if("finalizada"==b)return"finalizada"}},a.selectChanged=function(){k(1),a.selectedPage=0};var k=function(c){h.getRequest(c,j,a.selectedFilter).then(function(c){a.requests=c.data.requests,a.pages=c.data.pageCount,b.statusGroups=c.data.statusGroups},function(a){500==a.status&&f.error("Ocurrió un error. Intente de nuevo.","Error")})};a.status=function(b){if("analista"==a.user.userProfile){if("por asignar"==b)return"label-danger";if("asignada"==b)return"label-primary";if("atendida"==b)return"label-info";if("en revision"==b)return"label-warning";if("completada"==b)return"label-success";if("finalizada"==b)return"label-default"}if("coordinador"==a.user.userProfile){if("por asignar"==b)return"label-danger";if("asignada"==b)return"label-primary";if("atendida"==b)return"label-info";if("en revision"==b)return"label-warning";if("completada"==b)return"label-success";if("finalizada"==b)return"label-default"}if("visitador"==a.user.userProfile){if("asignada"==b)return"label-danger";if("atendida"==b)return"label-info";if("en revision"==b)return"label-warning";if("completada"==b)return"label-success";if("finalizada"==b)return"label-default"}},a.date=function(a){a=a.split("T")[0].split("-");var b=a[0],c=a[1],d=a[2];return d+"/"+c+"/"+b},a.pageSelected=function(b){a.selectedPage=b,k(a.selectedPage+1)},a.previousPage=function(){a.selectedPage-1>=0?(a.selectedPage--,k(a.selectedPage+1)):console.log("extremo izquierdo")},a.nextPage=function(){a.selectedPage+1<a.pages?(a.selectedPage++,k(a.selectedPage+1)):console.log("extremo derecho")},a.detail=function(a){e.go("main.home.loaddata.requestdetail",{id:a})}}]),angular.module("frontend2App").factory("request",["vcrestangular","localStorageService",function(a,b){var c={};return c.getRequest=function(c,d,e){return a.all("me").get("request",{page:c,pageSize:d,statusId:e},{token:b.get("token")})},c.postRequest=function(c){return a.all("request").post(c,{},{token:b.get("token")})},c.partialUpdate=function(c){return a.all("request/"+c.id).patch(c,{},{token:b.get("token")})},c.getById=function(c){return a.all("request").get(c,{},{token:b.get("token")})},c.postBudgetImage=function(c,d){for(var e=new FormData,f=0;f<d.length;f++)e.append("file",d[f]);return a.one("request/"+c+"/budget/image").withHttpConfig({transformRequest:angular.identity}).customPOST(e,"",{},{"Content-Type":void 0,token:b.get("token")})},c.postFormImage=function(c,d){for(var e=new FormData,f=0;f<d.length;f++)e.append("file",d[f]);return a.one("request/"+c+"/form/image").withHttpConfig({transformRequest:angular.identity}).customPOST(e,"",{},{"Content-Type":void 0,token:b.get("token")})},c}]),angular.module("frontend2App").controller("RequestdetailCtrl",["$rootScope","$scope","$stateParams","$uibModal","$state","toastr","session","user","request","budget","response","baseUrl",function(a,b,c,d,e,f,g,h,i,j,k,l){var m=10;b.user=g.getCurrentUser(),b.request=k.data,b.downloadBudget=function(){window.open(l+"/document/budget/"+b.request.guaranteeLetter.budget.id)},b.downloadGuarantee=function(){window.open(l+"/document/budget/"+b.request.guaranteeLetter.budget.id)},b.load=function(){e.go("main.home.loaddata.budget",{id:b.request.id})},b.assign=function(){h.getVisitors(1,m).then(function(c){var e=d.open({animation:!0,templateUrl:"views/assignvisitormodal.html",controller:"AssignvisitormodalCtrl",size:"lg",resolve:{data:function(){return c.data}}});e.result.then(function(c){i.partialUpdate({id:b.request.id,visitorId:c.id,statusId:3}).then(function(c){c.data.created?f.warning("Otro coordinador acaba de asignar esta visita.","Atención"):f.success("Asignación hecha con éxito.","Listo"),b.request=c.data,a.statusGroups=c.data.statusGroups},function(a){500==a.status&&f.error("Ocurrió un error. Intente de nuevo.","Error")})},function(){console.log("Modal dismissed at: "+new Date)})},function(a){500==a.status&&f.error("Ocurrió un error. Intente de nuevo.","Error")})},b.date=function(a){a=a.split("T")[0].split("-");var b=a[0],c=a[1],d=a[2];return d+"/"+c+"/"+b},b.gender=function(a){return"M"==a?"Masculino":"Femenino"},b.age=function(a){var b=new Date;a=a.split("T")[0].split("-");var c=a[0],d=a[1],e=a[2],f=b.getFullYear()-c,g=b.getMonth()+1-d,h=b.getDay()-e;return(g>0||0==g&&h>=0)&&f++,f}}]),angular.module("frontend2App").controller("AssignvisitormodalCtrl",["$rootScope","$scope","$uibModalInstance","data","user",function(a,b,c,d,e){var f=10;b.selectedPage=0,b.visitors=d.users,b.pages=d.pageCount;var g=function(c){e.getVisitors(c,f).then(function(c){b.visitors=c.data.users,b.pages=c.data.pageCount,a.statusGroups=c.data.statusGroups},function(a){500==a.status&&toastr.error("Ocurrió un error. Intente de nuevo.","Error")})};b.pageSelected=function(a){b.selectedPage=a,g(b.selectedPage+1)},b.previousPage=function(){b.selectedPage-1>=0?(b.selectedPage--,g(b.selectedPage+1)):console.log("extremo izquierdo")},b.nextPage=function(){b.selectedPage+1<b.pages?(b.selectedPage++,g(b.selectedPage+1)):console.log("extremo derecho")},b.assign=function(a){c.close(a)},b.cancel=function(){c.dismiss("cancel")}}]),angular.module("frontend2App").factory("user",["vcrestangular","localStorageService",function(a,b){var c=9,d={};return d.getVisitors=function(d,e){return a.all("user").get("",{page:d,pageSize:e,profile:c},{token:b.get("token")})},d}]),angular.module("frontend2App").factory("guaranteeletter",["vcrestangular","localStorageService",function(a,b){var c={};return c.getGuaranteeLetter=function(c){return a.all("guaranteeLetter").customGET("",c,{token:b.get("token")})},c}]),angular.module("frontend2App").controller("GuaranteeletterdetailCtrl",["$rootScope","$scope","$state","$stateParams","toastr","request","session","response",function(a,b,c,d,e,f,g,h){b.user=g.getCurrentUser(),a.statusGroups=h.data.statusGroups,1==h.data.guaranteeLetter.length?(b.guaranteeLetter=h.data.guaranteeLetter[0],h.data.guaranteeLetter[0].request.length?b.history=h.data.guaranteeLetter[0].request:b.history=null):(b.guaranteeLetter=null,e.error("No se encontró carta aval asociada al código.","Error")),b.statusText=function(a){if("analista"==b.user.userProfile){if("por asignar"==a)return"por asignar";if("asignada"==a)return"asignada";if("atendida"==a)return"atendida";if("en revision"==a)return"en revision";if("completada"==a)return"completada";if("finalizada"==a)return"finalizada"}if("coordinador"==b.user.userProfile){if("por asignar"==a)return"por asignar";if("asignada"==a)return"asignada";if("atendida"==a)return"atendida";if("en revision"==a)return"en revision";if("completada"==a)return"completada";if("finalizada"==a)return"finalizada"}if("visitador"==b.user.userProfile){if("asignada"==a)return"pendiente";if("atendida"==a)return"atendida";if("en revision"==a)return"en revision";if("completada"==a)return"completada";if("finalizada"==a)return"finalizada"}},b.status2=function(a){if("analista"==b.user.userProfile){if("por asignar"==a)return"label-danger";if("asignada"==a)return"label-primary";if("atendida"==a)return"label-info";if("en revision"==a)return"label-warning";if("completada"==a)return"label-success";if("finalizada"==a)return"label-default"}if("coordinador"==b.user.userProfile){if("por asignar"==a)return"label-danger";if("asignada"==a)return"label-primary";if("atendida"==a)return"label-info";if("en revision"==a)return"label-warning";if("completada"==a)return"label-success";if("finalizada"==a)return"label-default"}if("visitador"==b.user.userProfile){if("asignada"==a)return"label-danger";if("atendida"==a)return"label-info";if("en revision"==a)return"label-warning";if("completada"==a)return"label-success";if("finalizada"==a)return"label-default"}},b.status=function(a){return"activada"==a?"label-success":"label-default"},b.date=function(a){a=a.split("T")[0].split("-");var b=a[0],c=a[1],d=a[2];return d+"/"+c+"/"+b},b.gender=function(a){return"M"==a?"Masculino":"Femenino"},b.age=function(a){var b=new Date;a=a.split("T")[0].split("-");var c=a[0],d=a[1],e=a[2],f=b.getFullYear()-c,g=b.getMonth()+1-d,h=b.getDay()-e;return(g>0||0==g&&h>=0)&&f++,f},b.detail=function(a){c.go("main.home.loaddata.requestdetail",{id:a})},b.canRequest=function(){if(b.history){for(var a=0;a<b.history.length;a++)if(6!=b.history[a].status.id)return!1;return!0}return!0},b.postRequest=function(){f.postRequest({guaranteeLetterId:b.guaranteeLetter.id}).then(function(c){c.data.created?e.warning("Otro analista acaba de solicitar esta visita.","Atención"):e.success("Solicitud de visita generada con éxito.","Listo"),b.guaranteeLetter.request={id:c.data.id,guaranteeLetterId:c.data.guaranteeLetterId,statusId:c.data.statusId,coordinatorId:c.data.coordinatorId,visitorId:c.data.visitorId,analystId:c.data.analystId,formId:c.data.formId,startDate:c.data.startDate,endDate:c.data.endDate,status:c.data.status},b.history?b.history.push(b.guaranteeLetter.request):b.history=[b.guaranteeLetter.request],a.statusGroups=c.data.statusGroups},function(a){500==a.status&&e.error("Ocurrió un error. Intente de nuevo.","Error")})}}]),angular.module("frontend2App").controller("InitCtrl",["$state","session",function(a,b){b.getToken()?a.go("main.home.requestlist",{filter:""}):a.go("login")}]),angular.module("frontend2App").factory("helpers",["$rootScope",function(a){var b={},c=0,d=0,e=0,f=0,g=0;return b.cargar=function(){for(var b=0;b<a.statusGroups.length;b++)"por asignar"==a.statusGroups[b].status?c=a.statusGroups[b].cantidad:"asignada"==a.statusGroups[b].status?d=a.statusGroups[b].cantidad:"atendidas"==a.statusGroups[b].status?e=a.statusGroups[b].cantidad:"en revision"==a.statusGroups[b].status?f=a.statusGroups[b].cantidad:finalizadas=a.statusGroups[b].cantidad},b.porAsignar=function(){return c},b.asignada=function(){return d},b.atendida=function(){return e},b.enRevision=function(){return f},b.finalizada=function(){return g},b}]),angular.module("frontend2App").controller("LoaddataCtrl",["$scope","$stateParams","toastr","session","response",function(a,b,c,d,e){a.user=d.getCurrentUser(),400!=e.status&&404!=e.status&&500!=e.status?a.response=e.data:c.error("No se encontró visita asociada al código.","Error"),a.title=function(){return a.response?"Información de la visita clínica asociada al código: "+b.id:"No se encontró visita clínica asociada código."},a.decision=function(){return"visitador"==a.user.userProfile?"Finalización":"coordinador"==a.user.userProfile?"Autorización":"Algo"},a.iconClass=function(){return"visitador"==a.user.userProfile?"glyphicon glyphicon-ok-sign":"coordinador"==a.user.userProfile?"glyphicon glyphicon-question-sign":"Algo"}}]),angular.module("frontend2App").factory("budget",["vcrestangular","localStorageService",function(a,b){var c={};return c.getById=function(c){return a.all("budget").get(c,{},{token:b.get("token")})},c.getByRequestId=function(c){return a.all("budget").get("",{requestId:c},{token:b.get("token")})},c.postDocument=function(c,d){for(var e=new FormData,f=0;f<d.length;f++)e.append("file",d[f]);return a.one("budget/"+c+"/document").withHttpConfig({transformRequest:angular.identity}).customPOST(e,"",{},{"Content-Type":void 0,token:b.get("token")})},c}]),angular.module("frontend2App").controller("BudgetCtrl",["$rootScope","$scope","$uibModal","toastr","budgetData","session",function(a,b,c,d,e,f){b.budget=e.data,b.user=f.getCurrentUser(),b.edit=function(e,f){var g=c.open({animation:!0,templateUrl:"views/edititemmodal.html",controller:"EdititemmodalCtrl",size:"lg",resolve:{data:function(){return angular.copy(e)}}});g.result.then(function(c){a.statusGroups=c.statusGroups,b.budget.item[f]=c,d.success("Cambio hecho con éxito.","Listo")},function(){console.log("Modal dismissed at: "+new Date)})}}]),angular.module("frontend2App").controller("SurveyCtrl",["$scope","surveyData","session",function(a,b,c){a.user=c.getCurrentUser(),a.disabled=function(){return"visitador"==a.user.userProfile?!1:!0}}]),angular.module("frontend2App").controller("EdititemmodalCtrl",["$scope","$uibModalInstance","toastr","data","item",function(a,b,c,d,e){a.it=d,a.edited=function(d){e.partialUpdate(a.it).then(function(a){b.close(a.data)},function(a){500==a.status&&c.error("Ocurrió un error. Intente de nuevo.","Error")})},a.cancel=function(){b.dismiss("cancel")}}]),angular.module("frontend2App").factory("item",["vcrestangular","localStorageService",function(a,b){var c={};return c.partialUpdate=function(c){return a.all("item/"+c.id).patch(c,{},{token:b.get("token")})},c}]),angular.module("frontend2App").controller("AttachedCtrl",["$scope","$stateParams","$rootScope","toastr","response","request","baseUrl",function(a,b,c,d,e,f,g){a.budgetFiles=[],a.surveyFiles=[],a.budgetPaths=e.data.budgetImage,a.surveyPaths=e.data.formImage,a.loadable=function(){return a.budgetFiles.length>=1&&a.surveyFiles.length>=1?!1:!0},a.loadData=function(){f.postBudgetImage(e.data.id,a.budgetFiles).then(function(b){e.data.budgetImage=b.data.path,f.postFormImage(e.data.id,a.surveyFiles).then(function(c){a.budgetFiles=[],a.surveyFiles=[],a.budgetPaths=b.data.path,a.surveyPaths=c.data.path,e.data.formImage=c.data.path,d.success("Carga hecha con éxito.","Listo")},function(a){d.error("Ocurrió un error. Intente de nuevo.","Error")})},function(a){d.error("Ocurrió un error. Intente de nuevo.","Error")})},a.viewImage=function(a){window.open(g+"/image/"+a)},a.budgetLoaded=function(b){b.size<=2099734?a.$apply(function(){a.budgetFiles.push(b)}):(console.log("Más de 2 MB"),d.error("La imagen seleccionada supera los 2 MB.","Error"))},a.removeBudget=function(b){a.budgetFiles.splice(b,1)},a.budgetUpload=function(){angular.element("#upload1").trigger("click")},a.surveyLoaded=function(b){b.size<=2099734?a.$apply(function(){a.surveyFiles.push(b)}):console.log("Más de 2 MB")},a.removeSurvey=function(b){a.surveyFiles.splice(b,1)},a.surveyUpload=function(){angular.element("#upload2").trigger("click")}}]),angular.module("frontend2App").factory("survey",["vcrestangular","localStorageService",function(a,b){var c={};return c.getByRequestId=function(c){return a.all("form").get("",{requestId:c},{token:b.get("token")})},c.postDocument=function(c,d){for(var e=new FormData,f=0;f<d.length;f++)e.append("file",d[f]);return a.one("form/"+c+"/document").withHttpConfig({transformRequest:angular.identity}).customPOST(e,"",{},{"Content-Type":void 0,token:b.get("token")})},c}]),angular.module("frontend2App").controller("DecisionCtrl",["$scope","$stateParams","$rootScope","toastr","session","request",function(a,b,c,d,e,f){a.user=e.getCurrentUser(),a.finish=function(){f.partialUpdate({id:b.id,statusId:4}).then(function(a){d.success("Finalización hecha con éxito.","Listo"),c.statusGroups=a.data.statusGroups},function(a){d.error("Ocurrió un error. Intente de nuevo.","Error")})},a.review=function(){f.partialUpdate({id:b.id,statusId:5}).then(function(a){d.success("Envío a revisión hecho con éxito.","Listo"),c.statusGroups=a.data.statusGroups},function(a){d.error("Ocurrió un error. Intente de nuevo.","Error")})},a.authorize=function(){f.partialUpdate({id:b.id,statusId:6}).then(function(a){d.success("Autorización hecha con éxito.","Listo"),c.statusGroups=a.data.statusGroups},function(a){d.error("Ocurrió un error. Intente de nuevo.","Error")})}}]),angular.module("frontend2App").constant("baseUrl","https://pacific-inlet-56422.herokuapp.com/api/v1"),angular.module("frontend2App").run(["$templateCache",function(a){a.put("views/assignvisitormodal.html",'<div class="modal-header"> <h3 class="modal-title">Asignación de visita clínica</h3> </div> <div class="modal-body"> <div class="container-fluid"> <div class="panel panel-primary"> <div class="panel-heading"> <h2>Listado de visitadores</h2> </div> <div class="panel-body"> <center> <nav> <ul class="pagination"> <li> <a ng-click="previousPage()" href="" aria-label="Previous"> <span aria-hidden="true">&laquo;</span> </a> </li> <li ng-class="{\'active\': selectedPage == $index}" ng-repeat="i in [].constructor(pages) track by $index"><a ng-click="pageSelected($index)" href="">{{$index + 1}}</a></li> <li> <a ng-click="nextPage()" href="" aria-label="Next"> <span aria-hidden="true">&raquo;</span> </a> </li> </ul> </nav> </center> <div class="table-responsive"> <table class="table table-hover table-condensed"> <tr> <th><center>Cédula</center></th> <th><center>Nombre</center></th> <th><center>Visitas asignadas</center></th> <th><center>Acción</center></th> </tr> <tr ng-repeat="visitor in visitors"> <td><center>{{visitor.person.identityCard}}</center></td> <td><center>{{visitor.person.firstName}} {{visitor.person.lastName}}</center></td> <td><center>{{visitor.assignments}}</center></td> <td><center><button ng-click="assign(visitor)" type="button" class="btn btn-warning btn-xs">Asignar</button></center></td> </tr> </table> </div> </div> </div> </div> </div> <div class="modal-footer"> <!--<button class="btn btn-primary" type="button" ng-click="ok()">OK</button>--> <button class="btn btn-warning" type="button" ng-click="cancel()">Cancelar</button> </div>'),a.put("views/attached.html",'<div class="container-fluid"> <div class="row"> <div class="col-sm-6"> <label class="text-primary">Imágenes cargadas sobre el presupuesto</label> <ul class="list-group"> <li ng-repeat="file in budgetPaths track by $index" class="list-group-item"> {{file.path}} <span class="pull-right"> <button class="btn btn-xs btn-danger" ng-click="viewImage(file.path)"> <span class="glyphicon glyphicon-eye-open"></span> </button> </span> </li> </ul> </div> <div class="col-sm-6"> <label class="text-success">Imágenes cargadas sobre la encuesta</label> <ul class="list-group"> <li ng-repeat="file in surveyPaths track by $index" class="list-group-item"> {{file.path}} <span class="pull-right"> <button class="btn btn-xs btn-danger" ng-click="viewImage(file.path)"> <span class="glyphicon glyphicon-eye-open"></span> </button> </span> </li> </ul> </div> </div> <div ng-if="user.userProfile == \'visitador\'"> <br><br><br> <div class="row"> <div class="col-sm-6"> <div class="form-group"> <button type="button" class="btn btn-primary btn-xs" ng-click="budgetUpload()"><span class="glyphicon glyphicon-plus-sign"></span> <strong>Cargar</strong></button> <label class="text-primary">imagen del presupuesto con cambios</label> <ul class="list-group"> <li ng-repeat="file in budgetFiles track by $index" class="list-group-item"> {{file.name}} <span class="pull-right"> <button class="btn btn-xs btn-danger" ng-click="removeBudget($index)"> <span class="glyphicon glyphicon-remove"></span> </button> </span> </li> </ul> </div> </div> <div class="col-sm-6"> <div class="form-group"> <button type="button" class="btn btn-success btn-xs" ng-click="surveyUpload()"><span class="glyphicon glyphicon-plus-sign"></span> <strong>Cargar</strong></button> <label class="text-success">imagen de la encuesta realizada</label> <ul class="list-group"> <li ng-repeat="file in surveyFiles track by $index" class="list-group-item"> {{file.name}} <span class="pull-right"> <button class="btn btn-xs btn-danger" ng-click="removeSurvey($index)"> <span class="glyphicon glyphicon-remove"></span> </button> </span> </li> </ul> </div> </div> </div> <br><br><br> <div class="row"> <center> <button ng-disabled="loadable()" class="btn btn-md btn-info" ng-click="loadData()"> <span class="glyphicon glyphicon-open"></span> Subir imágenes </button> <p class="help-block">Las nuevas imágenes sustituirán las anteriores</p> </center> </div> </div> </div> <input id="upload1" type="file" accept="image/*" onchange="angular.element(this).scope().budgetLoaded(this.files[0])" class="hide"> <input id="upload2" type="file" accept="image/*" onchange="angular.element(this).scope().surveyLoaded(this.files[0])" class="hide">'),a.put("views/budget.html",'<div class="panel panel-primary"> <div class="panel-heading"> <h2>Presupuesto</h2> </div> <div class="table-responsive"> <table class="table table-hover table-condensed"> <tr> <th><center>Concepto</center></th> <th><center>Descripción</center></th> <th><center>Cantidad</center></th> <th><center>Costo Bs</center></th> <th ng-if="user.userProfile == \'visitador\'"><center>Acción</center></th> </tr> <tr ng-repeat="item in budget.item"> <td><center>{{item.concept}}</center></td> <td><center>{{item.description}}</center></td> <td><center>{{item.quantity}}</center></td> <td><center>{{item.cost}}</center></td> <td ng-if="user.userProfile == \'visitador\'"> <center> <button ng-click="edit(item, $index)" type="button" class="btn btn-warning btn-xs">Editar</button> </center> </td> </tr> </table> </div> </div> '),a.put("views/decision.html",'<div class="row"> <div ng-if="user.userProfile == \'visitador\'"> <center> <button class="btn btn-md btn-info" ng-click="finish()"> <span class="glyphicon glyphicon-open"></span> Finalizar </button> </center> </div> <div ng-if="user.userProfile == \'coordinador\'"> <center> <button class="btn btn-md btn-info" ng-click="review()"> <span class="glyphicon glyphicon-open"></span> A revisión </button> <button class="btn btn-md btn-info" ng-click="authorize()"> <span class="glyphicon glyphicon-open"></span> Autorizar </button> </center> </div> </div>'),a.put("views/edititemmodal.html",'<div class="modal-header"> <h3 class="modal-title">Cambio en el presupuesto</h3> </div> <div class="modal-body"> <div class="container-fluid"> <div class="panel panel-primary"> <div class="panel-heading"> <h2>Información de gasto</h2> </div> <br> <form name="form" class="form-horizontal" ng-submit="edited(form.$valid)"> <div class="form-group"> <label for="inputEmail3" class="col-sm-2 control-label">Descripción:</label> <div class="col-sm-10"> <input type="text" class="form-control" id="inputEmail3" ng-model="it.description" required> </div> </div> <div class="form-group"> <label for="inputPassword3" class="col-sm-2 control-label">Concepto:</label> <div class="col-sm-10"> <input type="text" class="form-control" id="inputPassword3" ng-model="it.concept" required> </div> </div> <div class="form-group"> <label for="inputPassword3" class="col-sm-2 control-label">Costo:</label> <div class="col-sm-3"> <input type="number" min="0" step="0.01" class="form-control" ng-model="it.cost" required> </div> </div> <div class="form-group"> <label for="inputPassword3" class="col-sm-2 control-label">Cantidad:</label> <div class="col-sm-2"> <input type="number" min="0" class="form-control" ng-model="it.quantity" required> </div> </div> <div class="text-right"> <button class="btn btn-primary" type="submit">OK</button> <button class="btn btn-warning" type="button" ng-click="cancel()">Cancelar</button> </div> </form> </div> </div> </div> <!--<div class="modal-footer">\n    <button class="btn btn-primary" type="button" ng-click="edited()">OK</button>\n    <button class="btn btn-warning" type="button" ng-click="cancel()">Cancelar</button>\n</div>-->'),a.put("views/guaranteeletterdetail.html",'<div ng-if="guaranteeLetter"> <a><strong><i class="glyphicon glyphicon-dashboard"></i> Detalles de la carta aval de código: {{guaranteeLetter.code}}</strong></a> </div> <div ng-if="!guaranteeLetter"> <a><strong><i class="glyphicon glyphicon-dashboard"></i> No se encontró carta aval asociada al código.</strong></a> </div> <hr> <div ng-if="guaranteeLetter"> <div class="container-fluid"> <div class="panel panel-primary"> <div class="panel-heading"> <h3 class="panel-title">Datos de carta aval</h3> </div> <br> <div class="container-fluid"> <form class="form-horizontal"> <div class="form-group"> <label class="col-sm-1 control-label">Estatus:</label> <div class="col-sm-1"> <!--<a class="form-control-static btn btn-md" ng-class="status(guaranteeLetter.status.status)">{{guaranteeLetter.status.status}}</a>--> <h5><span class="label" ng-class="status(guaranteeLetter.status.status)">{{guaranteeLetter.status.status}}</span></h5> <!--<p class="form-control-static img-rounded" ng-class="status(guaranteeLetter.status.status)"><strong>{{guaranteeLetter.status.status}}</strong></a>--> </div> <!--<label class="col-sm-2 control-label">Visita asociada #:</label>\n            <div class="col-sm-2">\n              <div ng-if="guaranteeLetter.request.id">\n                <p class="form-control-static">{{guaranteeLetter.request.id}}</p>\n              </div>\n              <div ng-if="!guaranteeLetter.request.id">\n                <p class="form-control-static">No posee</p>\n              </div>\n            </div>--> <div ng-if="canRequest()" class="col-sm-2"> <button ng-click="postRequest()" type="button" class="btn btn-danger btn-md">Solicitar visita</button> </div> </div> </form> <div ng-if="history"> <div class="panel panel-primary"> <div class="panel-heading">Historial de visitas</div> <div class="panel-body"> <div class="table-responsive"> <table class="table table-hover table-condensed"> <tr> <th><center>Código de visita</center></th> <th><center>Fecha solicitud</center></th> <th><center>Estatus</center></th> <th><center>Acción</center></th> </tr> <tr ng-repeat="request in history"> <td><center>{{request.id}}</center></td> <td><center>{{date(request.startDate)}}</center></td> <td><center><span class="label" ng-class="status2(request.status.status)">{{statusText(request.status.status)}}</span></center></td> <td> <center> <button ng-click="detail(request.id)" type="button" class="btn btn-primary btn-xs">Ver</button> </center> </td> </tr> </table> </div> </div> </div> </div> </div> </div> <div class="panel panel-primary"> <div class="panel-heading"> <h3 class="panel-title">Póliza asociada #: {{guaranteeLetter.policy.id}}</h3> </div> <br> <div class="container-fluid"> <form class="form-horizontal"> <div class="form-group"> <label class="col-sm-2 control-label">Cobertura desde:</label> <div class="col-sm-2"> <p class="form-control-static">{{date(guaranteeLetter.policy.startDate)}}</p> </div> <label class="col-sm-2 control-label">hasta:</label> <div class="col-sm-2"> <p class="form-control-static">{{date(guaranteeLetter.policy.endDate)}}</p> </div> <label class="col-sm-2 control-label">Prima</label> <div class="col-sm-2"> <p class="form-control-static">Bs. {{guaranteeLetter.policy.cost}}</p> </div> </div> <div class="panel panel-primary"> <div class="panel-heading"> <!--<h3 class="panel-title">Datos del tomador</h3>--> Datos del tomador </div> <!--<div class="panel-heading">Datos del tomador</div>--> <div class="panel-body"> <div class="form-group"> <label class="col-sm-3 col-md-2 control-label">Nombre:</label> <div class="col-sm-3 col-md-2"> <p class="form-control-static">{{guaranteeLetter.policy.holder.firstName}} {{guaranteeLetter.policy.holder.lastName}}</p> </div> <label class="col-sm-3 col-md-2 control-label">Cédula:</label> <div class="col-sm-3 col-md-2"> <p class="form-control-static">{{guaranteeLetter.policy.holder.identityCard}}</p> </div> <label class="col-sm-3 col-md-2 control-label">Género:</label> <div class="col-sm-3 col-md-2"> <p class="form-control-static">{{gender(guaranteeLetter.policy.holder.gender)}}</p> </div> <label class="col-sm-3 col-md-2 control-label">Edad:</label> <div class="col-sm-3 col-md-2"> <p class="form-control-static">{{age(guaranteeLetter.policy.holder.birthDate)}}</p> </div> <label class="col-sm-3 col-md-2 control-label">Teléfono:</label> <div class="col-sm-3 col-md-2"> <p class="form-control-static">{{guaranteeLetter.policy.holder.phoneNumber}}</p> </div> <label class="col-sm-2 col-md-1 control-label">Email:</label> <div class="col-sm-4 col-md-3"> <p class="form-control-static">{{guaranteeLetter.policy.holder.email}}</p> </div> <label class="col-sm-3 col-md-2 control-label">Dirección:</label> <div class="col-sm-9 col-md-10"> <p class="form-control-static">{{guaranteeLetter.policy.holder.address}}</p> </div> </div> </div> </div> <div class="panel panel-primary"> <div class="panel-heading"> <!--<h3 class="panel-title">Datos del asegurado</h3>--> Datos del asegurado </div> <div class="panel-body"> <div class="form-group"> <label class="col-sm-3 col-md-2 control-label">Nombre:</label> <div class="col-sm-3 col-md-2"> <p class="form-control-static">{{guaranteeLetter.policy.owner.firstName}} {{guaranteeLetter.policy.holder.lastName}}</p> </div> <label class="col-sm-3 col-md-2 control-label">Cédula:</label> <div class="col-sm-3 col-md-2"> <p class="form-control-static">{{guaranteeLetter.policy.owner.identityCard}}</p> </div> <label class="col-sm-3 col-md-2 control-label">Género:</label> <div class="col-sm-3 col-md-2"> <p class="form-control-static">{{gender(guaranteeLetter.policy.owner.gender)}}</p> </div> <label class="col-sm-3 col-md-2 control-label">Edad:</label> <div class="col-sm-3 col-md-2"> <p class="form-control-static">{{age(guaranteeLetter.policy.owner.birthDate)}}</p> </div> <label class="col-sm-3 col-md-2 control-label">Teléfono:</label> <div class="col-sm-3 col-md-2"> <p class="form-control-static">{{guaranteeLetter.policy.owner.phoneNumber}}</p> </div> <label class="col-sm-2 col-md-1 control-label">Email:</label> <div class="col-sm-4 col-md-3"> <p class="form-control-static">{{guaranteeLetter.policy.owner.email}}</p> </div> <label class="col-sm-3 col-md-2 control-label">Dirección:</label> <div class="col-sm-9 col-md-10"> <p class="form-control-static">{{guaranteeLetter.policy.holder.address}}</p> </div> </div> </div> </div> <div class="panel panel-primary"> <div class="panel-heading"> <!--<h3 class="panel-title">Datos del beneficiario</h3>--> Datos del beneficiario </div> <div class="panel-body"> <div class="form-group"> <label class="col-sm-3 col-md-2 control-label">Nombre:</label> <div class="col-sm-3 col-md-2"> <p class="form-control-static">{{guaranteeLetter.beneficiary.firstName}} {{guaranteeLetter.beneficiary.lastName}}</p> </div> <label class="col-sm-3 col-md-2 control-label">Cédula:</label> <div class="col-sm-3 col-md-2"> <p class="form-control-static">{{guaranteeLetter.beneficiary.identityCard}}</p> </div> <label class="col-sm-3 col-md-2 control-label">Género:</label> <div class="col-sm-3 col-md-2"> <p class="form-control-static">{{gender(guaranteeLetter.beneficiary.gender)}}</p> </div> <label class="col-sm-3 col-md-2 control-label">Edad:</label> <div class="col-sm-3 col-md-2"> <p class="form-control-static">{{age(guaranteeLetter.beneficiary.birthDate)}}</p> </div> <label class="col-sm-3 col-md-2 control-label">Teléfono:</label> <div class="col-sm-3 col-md-2"> <p class="form-control-static">{{guaranteeLetter.beneficiary.phoneNumber}}</p> </div> <label class="col-sm-2 col-md-1 control-label">Email:</label> <div class="col-sm-4 col-md-3"> <p class="form-control-static">{{guaranteeLetter.beneficiary.email}}</p> </div> <label class="col-sm-3 col-md-2 control-label">Dirección:</label> <div class="col-sm-9 col-md-10"> <p class="form-control-static">{{guaranteeLetter.beneficiary.address}}</p> </div> </div> </div> </div> </form> </div> </div> </div> </div>'),
a.put("views/header.html",'<!-- header --> <div id="top-nav" class="navbar navbar-inverse navbar-static-top"> <div class="container-fluid"> <div class="navbar-header"> <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse"> <span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span> </button> <a class="navbar-brand" href="#">VC</a> <form class="navbar-form navbar-left" role="search"> <div class="form-group"> <input ng-model="code" type="text" class="form-control" placeholder="{{placeholder}}" required> </div> <button ng-click="search()" type="submit" class="btn btn-default">Buscar</button> </form> </div> <div class="navbar-collapse collapse"> <ul class="nav navbar-nav navbar-right"> <li class="dropdown"> <a class="dropdown-toggle" role="button" data-toggle="dropdown" href=""><i class="glyphicon glyphicon-user"></i> {{user.firstName}} <span class="caret"></span></a> <ul id="g-account-menu" class="dropdown-menu" role="menu"> <li><a ng-click="logout()" href=""><i class="glyphicon glyphicon-lock"></i> Salir</a></li> </ul> </li> </ul> </div> </div> <!-- /container --> </div> <!-- /Header -->'),a.put("views/home.html",'<div class="row"> <div class="col-sm-12"> <div ui-view></div> </div> </div>'),a.put("views/loaddata.html",'<a><strong><i class="glyphicon glyphicon-dashboard"></i> {{title()}} </strong></a> <hr> <div ng-if="response"> <!-- Nav tabs --> <ul ng-if="user.userProfile == \'analista\'" class="nav nav-tabs"> <li ui-sref-active="active"><a ui-sref=".requestdetail"><i class="glyphicon glyphicon-info-sign"></i> Información</a></li> <li ng-if="response.status.id == 6" ui-sref-active="active"><a ui-sref=".budget"><i class="glyphicon glyphicon-list-alt"></i> Presupuesto</a></li> <li ng-if="response.status.id == 6" ui-sref-active="active"><a ui-sref=".survey"><i class="glyphicon glyphicon-file"></i> Encuesta</a></li> <li ng-if="response.status.id == 6" ui-sref-active="active"><a ui-sref=".attached"><i class="glyphicon glyphicon-paperclip"></i> Adjuntos</a></li> </ul> <ul ng-if="user.userProfile == \'coordinador\'" class="nav nav-tabs"> <li ui-sref-active="active"><a ui-sref=".requestdetail"><i class="glyphicon glyphicon-info-sign"></i> Información</a></li> <li ng-if="response.status.id == 4 || response.status.id == 5 || response.status.id == 6" ui-sref-active="active"><a ui-sref=".budget"><i class="glyphicon glyphicon-list-alt"></i> Presupuesto</a></li> <li ng-if="response.status.id == 4 || response.status.id == 5 || response.status.id == 6" ui-sref-active="active"><a ui-sref=".survey"><i class="glyphicon glyphicon-file"></i> Encuesta</a></li> <li ng-if="response.status.id == 4 || response.status.id == 5 || response.status.id == 6" ui-sref-active="active"><a ui-sref=".attached"><i class="glyphicon glyphicon-paperclip"></i> Adjuntos</a></li> <li ng-if="response.status.id == 4 || response.status.id == 5" ui-sref-active="active"><a ui-sref=".decision"><i class="glyphicon glyphicon-ok-sign"></i> Autorización</a></li> </ul> <ul ng-if="user.userProfile == \'visitador\'" class="nav nav-tabs"> <li ui-sref-active="active"><a ui-sref=".requestdetail"><i class="glyphicon glyphicon-info-sign"></i> Información</a></li> <li ui-sref-active="active"><a ui-sref=".budget"><i class="glyphicon glyphicon-list-alt"></i> Presupuesto</a></li> <li ui-sref-active="active"><a ui-sref=".survey"><i class="glyphicon glyphicon-file"></i> Encuesta</a></li> <li ui-sref-active="active"><a ui-sref=".attached"><i class="glyphicon glyphicon-paperclip"></i> Adjuntos</a></li> <li ng-if="response.status.id == 3 || response.status.id == 4 || response.status.id == 5" ui-sref-active="active"><a ui-sref=".decision"><i class="glyphicon glyphicon-ok-sign"></i> Finalización</a></li> </ul> <!-- Tab panes --> <div class="tab-content"> <br> <div ui-view></div> </div> </div>'),a.put("views/login.html",'<center> <form name="form" class="form-inline" ng-submit="submit(form.$valid)"> <div class="form-group"> <label class="sr-only" for="exampleInputEmail3">Cédula</label> <input type="text" class="form-control" placeholder="Cédula" ng-model="login.identityCard" required> </div> <div class="form-group"> <label class="sr-only" for="exampleInputPassword3">Contraseña</label> <input type="password" class="form-control" placeholder="Password" ng-model="login.password" required> </div> <button class="btn btn-default" ng-click="submit()">Iniciar sesión</button> </form> </center>'),a.put("views/main.html",'<header code=""></header> <!-- Main --> <div class="container-fluid"> <div class="row"> <div class="col-sm-2"> <sidebar></sidebar> </div> <div class="col-sm-10"> <div ui-view></div> </div> </div> </div> <!--<footer class="text-center">This Bootstrap 3 dashboard layout is compliments of <a href="http://www.bootply.com/85850"><strong>Bootply.com</strong></a></footer>-->'),a.put("views/requestdetail.html",'<!--<div ng-if="request">\n  <a><strong><i class="glyphicon glyphicon-dashboard"></i> Detalles de la solicitud: # {{request.id}}</strong></a>\n</div>\n\n<div ng-if="!request">\n  <a><strong><i class="glyphicon glyphicon-dashboard"></i> No se encontró visita asociada al código.</strong></a>\n</div>\n\n<hr>--> <div ng-if="request"> <div class="panel-body"> <div ng-if="user.userProfile == \'analista\'"> <div ng-if="request.statusId == 2"> <div class="alert alert-danger" role="alert"> <center>Solicitud de visita no asignada.</center> </div> </div> <div ng-if="request.statusId == 3"> <div class="alert alert-info" role="alert"> <center>Solicitud de visita asignada.</center> </div> </div> </div> <div ng-if="user.userProfile == \'coordinador\'"> <div ng-if="request.statusId == 2"> <div class="alert alert-danger" role="alert"> <center>Solicitud de visita no asignada. <a ng-click="assign()" href="" class="alert-link"><strong>Asignar</strong></a></center> </div> </div> <div ng-if="request.statusId == 3"> <div class="alert alert-info" role="alert"> <center>Solicitud de visita asignada.</center> </div> </div> <div ng-if="request.statusId == 4"> <div class="alert alert-success" role="alert"> <center>Solicitud atendida.</center> </div> </div> </div> <div ng-if="user.userProfile == \'visitador\'"> <div ng-if="request.statusId == 3"> <div class="alert alert-danger" role="alert"> <center> Solicitud de visita pendiente.<br> </center> </div> <center> <ul class="list-inline"> <li><button ng-click="downloadBudget()" type="button" class="btn btn-info btn-xs">Ver presupuesto</button></li> <li><button ng-click="downloadGuarantee()" type="button" class="btn btn-info btn-xs">Ver carta aval</button></li> <!--<li><button ng-click="load()" type="button" class="btn btn-info btn-xs">Cargar información</button></li>--> </ul> </center> </div> <div ng-if="request.statusId == 5"> <div class="alert alert-warning" role="alert"> <center> Solicitud de visita en revisión.<br> </center> </div> <center> <ul class="list-inline"> <li><button ng-click="downloadBudget()" type="button" class="btn btn-info btn-xs">Ver presupuesto</button></li> <li><button ng-click="downloadGuarantee()" type="button" class="btn btn-info btn-xs">Ver carta aval</button></li> <!--<li><button ng-click="load()" type="button" class="btn btn-info btn-xs">Cargar información</button></li>--> </ul> </center> </div> <div ng-if="request.statusId == 6"> <div class="alert alert-success" role="alert"> <center> Solicitud de visita completada.<br> </center> </div> <center> <ul class="list-inline"> <li><button ng-click="downloadBudget()" type="button" class="btn btn-info btn-xs">Ver presupuesto</button></li> <li><button ng-click="downloadGuarantee()" type="button" class="btn btn-info btn-xs">Ver carta aval</button></li> <!--<li><button ng-click="load()" type="button" class="btn btn-info btn-xs">Cargar información</button></li>--> </ul> </center> </div> </div> <div class="panel panel-primary"> <div class="panel-heading"> <h3 class="panel-title">Datos de la institución prestadora de servicio</h3> </div> <div class="panel-body"> <form class="form-horizontal"> <div class="form-group"> <label class="col-sm-2 control-label">Nombre:</label> <div class="col-sm-10"> <p class="form-control-static">{{request.guaranteeLetter.budget.affiliated.name}}</p> </div> <label class="col-sm-2 control-label">Teléfono:</label> <div class="col-sm-4"> <p class="form-control-static">{{request.guaranteeLetter.budget.affiliated.phoneNumber}}</p> </div> <label class="col-sm-2 control-label">RIF:</label> <div class="col-sm-4"> <p class="form-control-static">{{request.guaranteeLetter.budget.affiliated.rif}}</p> </div> <div ng-if="request.guaranteeLetter.budget.affiliated.portal"> <label class="col-sm-2 control-label">Portal:</label> <div class="col-sm-10"> <p class="form-control-static">{{request.guaranteeLetter.budget.affiliated.portal}}</p> </div> </div> <label class="col-sm-2 control-label">Dirección:</label> <div class="col-sm-10"> <p class="form-control-static">{{request.guaranteeLetter.budget.affiliated.address}}</p> </div> </div> </form> </div> </div> <!--<div ng-if="user.userProfile == \'visitador\'">--> <!--<div class="panel panel-primary">\n          <div class="panel-heading">\n            <h3 class="panel-title">Datos del tomador:</h3>\n          </div>\n          <div class="panel-body">\n            <form class="form-horizontal">\n              <div class="form-group">\n                <label class="col-sm-1 control-label">Nombre:</label>\n                <div class="col-sm-3">\n                  <p class="form-control-static">{{request.guaranteeLetter.policy.holder.firstName}} {{request.guaranteeLetter.policy.holder.lastName}}</p>\n                </div>\n                <label class="col-sm-1 control-label">Cédula:</label>\n                <div class="col-sm-2">\n                  <p class="form-control-static">{{request.guaranteeLetter.policy.holder.identityCard}}</p>\n                </div>\n                <label class="col-sm-1 control-label">Género:</label>\n                <div class="col-sm-2">\n                  <p class="form-control-static">{{gender(request.guaranteeLetter.policy.holder.gender)}}</p>\n                </div>\n                <label class="col-sm-1 control-label">Edad:</label>\n                <div class="col-sm-1">\n                  <p class="form-control-static">{{age(request.guaranteeLetter.policy.holder.birthDate)}}</p>\n                </div>\n                <label class="col-sm-1 control-label">Teléfono:</label>\n                <div class="col-sm-2">\n                  <p class="form-control-static">{{request.guaranteeLetter.policy.holder.phoneNumber}}</p>\n                </div>\n                <label class="col-sm-3 control-label">Correo electrónico:</label>\n                <div class="col-sm-6">\n                  <p class="form-control-static">{{request.guaranteeLetter.policy.holder.email}}</p>\n                </div>\n                <label class="col-sm-1 control-label">Dirección:</label>\n                <div class="col-sm-11">\n                  <p class="form-control-static">{{request.guaranteeLetter.policy.holder.address}}</p>\n                </div>\n              </div>\n            </form>\n          </div>\n        </div>--> <div class="panel panel-primary"> <div class="panel-heading"> <h3 class="panel-title">Datos del asegurado</h3> </div> <div class="panel-body"> <form class="form-horizontal"> <div class="form-group"> <label class="col-sm-3 col-md-2 control-label">Nombre:</label> <div class="col-sm-3 col-md-2"> <p class="form-control-static">{{request.guaranteeLetter.policy.owner.firstName}} {{request.guaranteeLetter.policy.holder.lastName}}</p> </div> <label class="col-sm-3 col-md-2 control-label">Cédula:</label> <div class="col-sm-3 col-md-2"> <p class="form-control-static">{{request.guaranteeLetter.policy.owner.identityCard}}</p> </div> <label class="col-sm-3 col-md-2 control-label">Género:</label> <div class="col-sm-3 col-md-2"> <p class="form-control-static">{{gender(request.guaranteeLetter.policy.owner.gender)}}</p> </div> <label class="col-sm-3 col-md-2 control-label">Edad:</label> <div class="col-sm-3 col-md-2"> <p class="form-control-static">{{age(request.guaranteeLetter.policy.owner.birthDate)}}</p> </div> <label class="col-sm-3 col-md-2 control-label">Teléfono:</label> <div class="col-sm-3 col-md-2"> <p class="form-control-static">{{request.guaranteeLetter.policy.owner.phoneNumber}}</p> </div> <label class="col-sm-2 col-md-1 control-label">Email:</label> <div class="col-sm-4 col-md-3"> <p class="form-control-static">{{request.guaranteeLetter.policy.owner.email}}</p> </div> <label class="col-sm-3 col-md-2 control-label">Dirección:</label> <div class="col-sm-9 col-md-10"> <p class="form-control-static">{{request.guaranteeLetter.policy.holder.address}}</p> </div> </div> </form> </div> </div> <div class="panel panel-primary"> <div class="panel-heading"> <h3 class="panel-title">Datos del beneficiario</h3> </div> <div class="panel-body"> <form class="form-horizontal"> <div class="form-group"> <label class="col-sm-3 col-md-2 control-label">Nombre:</label> <div class="col-sm-3 col-md-2"> <p class="form-control-static">{{request.guaranteeLetter.beneficiary.firstName}} {{guaranteeLetter.beneficiary.lastName}}</p> </div> <label class="col-sm-3 col-md-2 control-label">Cédula:</label> <div class="col-sm-3 col-md-2"> <p class="form-control-static">{{request.guaranteeLetter.beneficiary.identityCard}}</p> </div> <label class="col-sm-3 col-md-2 control-label">Género:</label> <div class="col-sm-3 col-md-2"> <p class="form-control-static">{{gender(request.guaranteeLetter.beneficiary.gender)}}</p> </div> <label class="col-sm-3 col-md-2 control-label">Edad:</label> <div class="col-sm-3 col-md-2"> <p class="form-control-static">{{age(request.guaranteeLetter.beneficiary.birthDate)}}</p> </div> <label class="col-sm-3 col-md-2 control-label">Teléfono:</label> <div class="col-sm-3 col-md-2"> <p class="form-control-static">{{request.guaranteeLetter.beneficiary.phoneNumber}}</p> </div> <label class="col-sm-2 col-md-1 control-label">Email:</label> <div class="col-sm-4 col-md-3"> <p class="form-control-static">{{request.guaranteeLetter.beneficiary.email}}</p> </div> <label class="col-sm-3 col-md-2 control-label">Dirección:</label> <div class="col-sm-9 col-md-10"> <p class="form-control-static">{{request.guaranteeLetter.beneficiary.address}}</p> </div> </div> </form> </div> </div> <!--</div>--> </div> </div>'),a.put("views/requestlist.html",'<a><strong><i class="glyphicon glyphicon-dashboard"></i> Solicitudes</strong></a> <hr> <div class="panel panel-primary"> <div class="panel-heading"> <h2>Solicitudes de visitas</h2> </div> <div class="panel-body"> <center> <nav> <ul class="pagination"> <li> <a ng-click="previousPage()" href="" aria-label="Previous"> <span aria-hidden="true">&laquo;</span> </a> </li> <li ng-class="{\'active\': selectedPage == $index}" ng-repeat="i in [].constructor(pages) track by $index"><a ng-click="pageSelected($index)" href="">{{$index + 1}}</a></li> <li> <a ng-click="nextPage()" href="" aria-label="Next"> <span aria-hidden="true">&raquo;</span> </a> </li> </ul> </nav> </center> <div class="row"> <form class="form-horizontal"> <div class="form-group"> <label class="col-sm-1 control-label">Filtro:</label> <div class="col-sm-2"> <select ng-model="selectedFilter" ng-options="filter.statusId as filter.filter for filter in filters" ng-change="selectChanged()"></select> </div> </div> </form> </div> <div class="table-responsive"> <table class="table table-hover table-condensed"> <tr> <th><center>Código de visita</center></th> <th><center>Código carta aval</center></th> <th><center>Fecha solicitud</center></th> <th><center>Estatus</center></th> <th><center>Acción</center></th> </tr> <tr ng-repeat="request in requests"> <td><center>{{request.id}}</center></td> <td><center>{{request.guaranteeLetter.code}}</center></td> <td><center>{{date(request.startDate)}}</center></td> <td><center><span class="label" ng-class="status(request.status.status)">{{statusText(request.status.status)}}</span></center></td> <!--<td><center>status({{request.status.status}})</center></td>--> <!--<td><center><p style="width: 100px" class="img-rounded" ng-class="status(request.status.status)">{{request.status.status}}</p></center></td>--> <td> <center> <button ng-click="detail(request.id)" type="button" class="btn btn-primary btn-xs">Ver</button> </center> </td> </tr> </table> </div> </div> </div>'),a.put("views/sidebar.html",'<!-- Left column --> <a><strong><i class="glyphicon glyphicon-wrench"></i> Opciones</strong></a> <hr> <ul class="nav nav-stacked"> <li class="nav-header"> <a href="" data-toggle="collapse" data-target="#userMenu">Solicitudes de visita <i class="glyphicon glyphicon-chevron-down"></i></a> <div ng-if="user.userProfile == \'analista\'"> <ul class="nav nav-stacked collapse in" id="userMenu"> <!--<li><a href=""><i class="glyphicon glyphicon-envelope"></i> No asignadas <span class="badge badge-info">{{porAsignarse}}</span></a></li>\n                            <li><a href=""><i class="glyphicon glyphicon-envelope"></i> Asignadas <span class="badge badge-info">{{asignadas}}</span></a></li>\n                            <li><a href=""><i class="glyphicon glyphicon-envelope"></i> Atendidas <span class="badge badge-info">{{atendidas}}</span></a></li>--> <li><a href="" ng-click="changeFilter(\'6\')"><i class="glyphicon glyphicon-envelope"></i> Finalizadas <span class="badge badge-info">{{completadas}}</span></a></li> </ul> </div> <div ng-if="user.userProfile == \'coordinador\'"> <ul class="nav nav-stacked collapse in" id="userMenu"> <li><a href="" ng-click="changeFilter(\'2\')"><i class="glyphicon glyphicon-envelope"></i> No asignadas <span class="badge badge-info">{{porAsignarse}}</span></a></li> <li><a href="" ng-click="changeFilter(\'4\')"><i class="glyphicon glyphicon-envelope"></i> Atendidas <span class="badge badge-info">{{atendidas}}</span></a></li> <!--<li><a href="" ng-click="changeFilter(\'6\')"><i class="glyphicon glyphicon-envelope"></i> Completadas <span class="badge badge-info">{{completadas}}</span></a></li>--> </ul> </div> <div ng-if="user.userProfile == \'visitador\'"> <ul class="nav nav-stacked collapse in" id="userMenu"> <li><a href="" ng-click="changeFilter(\'3\')"><i class="glyphicon glyphicon-envelope"></i> No atendidas <span class="badge badge-info">{{asignadas}}</span></a></li> <li><a href="" ng-click="changeFilter(\'\')"><i class="glyphicon glyphicon-envelope"></i> En revisión <span class="badge badge-info">{{enRevision}}</span></a></li> <!--<li><a href=""><i class="glyphicon glyphicon-envelope"></i> Completadas <span class="badge badge-info">{{completadas}}</span></a></li>--> </ul> </div> </li> <!--<li class="nav-header"> <a href="" data-toggle="collapse" data-target="#menu2"> Reports <i class="glyphicon glyphicon-chevron-right"></i></a>\n\n                    <ul class="nav nav-stacked collapse" id="menu2">\n                        <li><a href="">Information &amp; Stats</a>\n                        </li>\n                        <li><a href="">Views</a>\n                        </li>\n                        <li><a href="">Requests</a>\n                        </li>\n                        <li><a href="">Timetable</a>\n                        </li>\n                        <li><a href="">Alerts</a>\n                        </li>\n                    </ul>\n                </li>\n                <li class="nav-header">\n                    <a href="" data-toggle="collapse" data-target="#menu3"> Social Media <i class="glyphicon glyphicon-chevron-right"></i></a>\n                    <ul class="nav nav-stacked collapse" id="menu3">\n                        <li><a href=""><i class="glyphicon glyphicon-circle"></i> Facebook</a></li>\n                        <li><a href=""><i class="glyphicon glyphicon-circle"></i> Twitter</a></li>\n                    </ul>\n                </li>--> </ul> <!--<hr>\n\n            <a href=""><strong><i class="glyphicon glyphicon-link"></i> Resources</strong></a>\n\n            <hr>\n\n            <ul class="nav nav-pills nav-stacked">\n                <li class="nav-header"></li>\n                <li><a href=""><i class="glyphicon glyphicon-list"></i> Layouts &amp; Templates</a></li>\n                <li><a href=""><i class="glyphicon glyphicon-briefcase"></i> Toolbox</a></li>\n                <li><a href=""><i class="glyphicon glyphicon-link"></i> Widgets</a></li>\n                <li><a href=""><i class="glyphicon glyphicon-list-alt"></i> Reports</a></li>\n                <li><a href=""><i class="glyphicon glyphicon-book"></i> Pages</a></li>\n                <li><a href=""><i class="glyphicon glyphicon-star"></i> Social Media</a></li>\n            </ul>\n\n            <hr>\n            <ul class="nav nav-stacked">\n                <li class="active"><a href="" title="The Bootstrap Playground" target="ext">Playground</a></li>\n                <li><a href="">Bootstrap 3</a></li>\n                <li><a href="" title="Bootstrap 3 Panel">Panels</a></li>\n                <li><a href="" title="Bootstrap 3 Icons">Glyphicons</a></li>\n                <li><a href="">Layout</a></li>\n            </ul>\n\n            <hr>\n\n            <a href=""><strong><i class="glyphicon glyphicon-list"></i> More Templates</strong></a>\n\n            <hr>\n\n            <ul class="nav nav-stacked">\n                <li class="active"><a rel="nofollow" href="" target="ext">Premium Themes</a></li>\n                <li><a rel="nofollow" href="">Wrap Bootstrap</a></li>\n                <li><a rel="nofollow" href="">BootstrapZero</a></li>\n            </ul>-->'),a.put("views/survey.html",'<div class="panel panel-primary"> <div class="panel-heading"> <h2>Encuesta</h2> </div> <div class="panel-body"> <form class="form-horizontal"> <div class="form-group"> <label class="col-sm-12">¿Cómo evalúa el trato médico?</label> <div class="col-sm-12"> <label class="radio-inline"><input type="radio" ng-disabled="disabled()">Excelente</label> <label class="radio-inline"><input type="radio" ng-disabled="disabled()">Bueno</label> <label class="radio-inline"><input type="radio" ng-disabled="disabled()">Regular</label> <label class="radio-inline"><input type="radio" ng-disabled="disabled()">Malo</label> <label class="radio-inline"><input type="radio" ng-disabled="disabled()">Muy malo</label> </div> </div> <div class="form-group"> <label class="col-sm-12">¿Cómo evalúa el trato médico?</label> <div class="col-sm-12"> <label class="radio-inline"><input type="radio" ng-disabled="disabled()">Excelente</label> <label class="radio-inline"><input type="radio" ng-disabled="disabled()">Bueno</label> <label class="radio-inline"><input type="radio" ng-disabled="disabled()">Regular</label> <label class="radio-inline"><input type="radio" ng-disabled="disabled()">Malo</label> <label class="radio-inline"><input type="radio" ng-disabled="disabled()">Muy malo</label> </div> </div> </form> </div> </div>')}]);